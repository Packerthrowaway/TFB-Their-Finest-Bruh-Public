##################
#### CONSTANTS ###
##################
# Used for the Merge Plant traits for easier maintenance

### TANKS
#POSITION
@tank_1_X = 9
@tank_1_Y = 2
@tank_2_X = 9
@tank_2_Y = 3
@tank_3_X = 9
@tank_3_Y = 4
#BONUSES
@tank_max_speed = 0.05
@tank_production_capacity_factor = 0.05
@tank_soft_attack = 0.05


### SHIPS
#POISTION
@ship_1_X = 9
@ship_1_Y = 3
@ship_2_X = 9
@ship_2_Y = 4
@ship_3_X = 8
@ship_3_Y = 4
#BONUSES
@ship_cruiser_production_cost_factor = -0.1
@ship_destroyer_production_cost_factor = -0.1
@ship_submarine_production_cost_factor = -0.1
@ship_production_capacity_factor = -0.05
@ship_mines_sweeping = 0.1
@ship_mines_planting = 0.1

### AIRCRAFT
#POSITION
@aircraft_1_X = 9
@aircraft_1_Y = 2
@aircraft_2_X = 9
@aircraft_2_Y = 3
@aircraft_3_X = 9
@aircraft_3_Y = 4
#BONUSES
@aircraft_production_cost_factor = -0.05
@aircraft_air_agility = 0.05
@aircraft_air_defence = 0.1
@aircraft_surface_detection = 0.15
@aircraft_sub_detection = 0.15

### MATERIEL
#POSITION
@materiel_1_X = 9
@materiel_1_Y = 2
@materiel_2_X = 9
@materiel_2_Y = 3
@materiel_3_X = 9
@materiel_3_Y = 4
#BONUSES
@artillery_production_cost_factor = -0.1
@infantry_equipment_production_cost_factor = -0.1
@motorized_production_cost_factor = -0.1
@materiel_production_efficiency_cap_factor = 0.1
@materiel_production_capacity_factor = 0.1


########    ###    ##    ## ##    ##  ######  
   ##      ## ##   ###   ## ##   ##  ##    ## 
   ##     ##   ##  ####  ## ##  ##   ##       
   ##    ##     ## ## ## ## #####     ######  
   ##    ######### ##  #### ##  ##         ## 
   ##    ##     ## ##   ### ##   ##  ##    ## 
   ##    ##     ## ##    ## ##    ##  ######  


SOV_morozov_design_bureau_organization = {
	icon = GFX_idea_morozov_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV
			AND = {
				tag = MEX 
				has_dlc = "Man the Guns"
			}
			AND = {
				OR = {
					is_literally_china = yes
					#tag = MAN
					#tag = MEN
				} 
				has_dlc = "Waking the Tiger"
			}
			NOR_AAT = yes
		}
	}

	available = {
		FROM = { original_tag = SOV } 



		# When in a Foreign MIO, countries need to be at peace with original country
# 		IF = {
# 			limit = {
# 				FROM = { NOT = { original_tag = SOV } }
# 			}
# #			FROM = { NOT = { has_war_with = SOV } }
# 		}
		# ELSE = {
		# 	OR = {
		# 		FROM = { has_completed_focus = SOV_depoliticize_industry }
		# 		AND = {
		# 			FROM = { has_completed_focus = SOV_tank1 }
		# 			FROM = { has_completed_focus = SOV_new_corps2 }
		# 		}
		# 	}
		# }

		IF = {
			limit = {
				FROM = { tag = MEX }
			}
			FROM = { is_in_faction_with = SOV }
		}
		ELSE_IF = {
			limit = {
				FROM = {
					OR = {
						is_literally_china = yes
						tag = MAN
						#tag = MEN
					}
				} 
			}
			FROM = { has_completed_focus = CHI_hire_soviet_designer }
		}
		ELSE_IF = {
			limit = {
				FROM = { original_tag = NOR }
			}
			FROM = { has_completed_focus = NOR_invite_soviet_designers }
		}
	}

	

	equipment_type = { mio_cat_eq_all_light_tank }
	research_categories = { mio_cat_tech_light_armor_and_modules }

	tree_header_text = {
		text = mio_header_engine_and_suspension
		x = 1
	}

	tree_header_text = {
		text = mio_header_armor_and_armaments
		x = 7
	}

	initial_trait = {
		name = generic_mio_initial_trait_pmfu_light_tank_designer
		
		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_improved_boogies
		name = generic_mio_trait_improved_boogies
		icon = GFX_generic_mio_department_icon_tank_general_engine

		position = { x=1 y=0 }
		
		equipment_bonus = {
			maximum_speed = 0.02
			reliability = 0.05
		}
	}

	trait = {
		token = morozov_trait_mass_small_arms_ammunition_production
		name = morozov_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=4 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}

		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}

	trait = {
		token = generic_mio_engine_optimization
		name = generic_mio_engine_optimization
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_improved_boogies

		all_parents = { generic_mio_trait_improved_boogies }

		mutually_exclusive = { generic_mio_reduced_fuel_usage }
		
		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_reduced_fuel_usage
		name = generic_mio_reduced_fuel_usage
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_improved_boogies

		all_parents = { generic_mio_trait_improved_boogies }

		mutually_exclusive = { generic_mio_engine_optimization }
		
		equipment_bonus = {
			fuel_consumption = -0.1
			breakthrough = 0.05
		}
	}	

	trait = {
		token = generic_mio_improved_tracks_and_suspension
		name = generic_mio_improved_tracks_and_suspension
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=1 y=1 }
		relative_position_id = generic_mio_engine_optimization

		any_parent = { generic_mio_engine_optimization generic_mio_reduced_fuel_usage }
		
		equipment_bonus = {
			breakthrough = 0.1
			
		}
	}

	trait = {
		token = generic_mio_sloping_armor
		name = generic_mio_sloping_armor
		icon = GFX_generic_mio_trait_icon_defense

		position = { x=6 y=0 }
		relative_position_id = generic_mio_trait_improved_boogies

		equipment_bonus = {
			defense = 0.08
			armor_value = 0.08
		}
	}

	trait = {
		token = generic_mio_trait_piercing_rounds
		name = generic_mio_trait_piercing_rounds
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_sloping_armor

		all_parents = { generic_mio_sloping_armor }

		mutually_exclusive = { generic_mio_armor_hardening_process }
		
		equipment_bonus = {
			ap_attack = 0.1
			breakthrough = 0.05
		}
	}

	trait = {
		token = generic_mio_armor_hardening_process
		name = generic_mio_armor_hardening_process
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x=1 y=1 }
		relative_position_id = generic_mio_sloping_armor

		all_parents = { generic_mio_sloping_armor }

		mutually_exclusive = { generic_mio_trait_piercing_rounds }
		
		equipment_bonus = {
			armor_value = 0.1
			hardness = 0.05
			build_cost_ic = 0.02
		}
	}

	trait = {
		token = generic_mio_enlarged_breech
		name = generic_mio_enlarged_breech
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_piercing_rounds

		any_parent = { generic_mio_trait_piercing_rounds generic_mio_armor_hardening_process }
		
		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.05
		}
	}	

	trait = {
		token = generic_mio_quality_assurance_routines
		name = generic_mio_quality_assurance_routines
		icon = GFX_generic_mio_department_icon_tank_general_conversion

		position = { x=3 y=1 }
		relative_position_id = generic_mio_trait_improved_boogies

		all_parents = { generic_mio_trait_improved_boogies generic_mio_sloping_armor }
		
		

		production_bonus = {
			production_efficiency_gain_factor = 0.1
			production_conversion_speed_factor = 0.15
		}
	}

	trait = {
		token = generic_mio_streamlined_production
		name = generic_mio_streamlined_production
		icon = GFX_generic_mio_department_icon_tank_general_technology		

		position = { x=0 y=1 }
		relative_position_id = generic_mio_quality_assurance_routines

		all_parents = { generic_mio_quality_assurance_routines }
		

		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = generic_mio_gunner_sight_improvements
		name = generic_mio_gunner_sight_improvements
		icon = GFX_generic_mio_department_icon_tank_general_quality

		position = { x=0 y=1 }
		relative_position_id = generic_mio_streamlined_production

		all_parents = { generic_mio_enlarged_breech generic_mio_improved_tracks_and_suspension generic_mio_streamlined_production  }
		
		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_adaptable_build
		name = generic_mio_trait_adaptable_build
		icon = GFX_generic_mio_department_icon_tank_light_tank_armor

		position = { x=0 y=1 }
		relative_position_id = generic_mio_gunner_sight_improvements

		all_parents = { generic_mio_gunner_sight_improvements }
		

		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.05
			hardness = 0.05
		}
		
	}
}


SOV_astrov_design_bureau_organization = {
	icon = GFX_idea_astrov_design_bureau
	
	allowed = {	
		original_tag = SOV
	}

	available = {
		FROM = { original_tag = SOV }
		# IF = {
		# 	limit = { FROM = { original_tag = SOV } } 
		# } 
		# When in a Foreign MIO, countries need to be at peace with original country
# 		IF = {
# 			limit = {
# 				FROM = { NOT = { original_tag = SOV } }
# 			}
# #			FROM = { NOT = { has_war_with = SOV } }
# 		}
		# ELSE = {
		# 	OR = {
		# 		FROM = { has_completed_focus = SOV_depoliticize_industry }
		# 		AND = {
		# 			FROM = { has_completed_focus = SOV_tank1 }
		# 			FROM = { has_completed_focus = SOV_new_corps3 }
		# 		}
		# 	}
		# }
	}

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_174
	# 	name = SOV_merge_tank_plant
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_maximum_speed
	# 	special_trait_background = yes

	# 	position = { x=@tank_1_X y=@tank_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = { #Two FROM blocs to provide two different check marks in the UI
	# 		FROM = {
	# 			has_full_control_of_state = 195 #LENINGRAD
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_174_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		maximum_speed = @tank_max_speed
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_112
	# 	name = SOV_merge_tank_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@tank_2_X y=@tank_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 252 #GORKY
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_112_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @tank_production_capacity_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_ural_heavy_machine_building_plant
	# 	name = SOV_merge_tank_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_soft_attack
	# 	special_trait_background = yes

	# 	position = { x=@tank_3_X y=@tank_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 653 #SVERDLOVSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_ural_heavy_machine_building_plant_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		soft_attack = @tank_soft_attack
	# 	}
	# }

	equipment_type = { armor }
	research_categories = { mio_cat_tech_medium_armor_and_modules }

	tree_header_text = {
		text = mio_header_tank_construction
		x = 3
	}

	tree_header_text = {
		text = mio_header_equipment_and_specialization
		x = 7
	}

	
	initial_trait = {
		name = generic_mio_initial_trait_comintern_medium_tank_designer
		
		equipment_bonus = {
			reliability = -0.1
			breakthrough = -0.05
			build_cost_ic = -0.03
		}
	}

	trait = {
		token = astrov_trait_mass_small_arms_ammunition_production
		name = astrov_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=3 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_simplified_suspension
		name = generic_mio_trait_simplified_suspension
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=1 y=0 }
		
		equipment_bonus = {
			reliability = 0.02
			maximum_speed = 0.03
		}
	}
	
	trait = {
		token = generic_mio_trait_crew_ergonomics
		name = generic_mio_trait_crew_ergonomics
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=4 y=0 }
		relative_position_id = generic_mio_trait_simplified_suspension
		
		equipment_bonus = {
			maximum_speed = 0.02
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_armor_steel_working
		name = generic_mio_trait_armor_steel_working
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_simplified_suspension

		any_parent = { generic_mio_trait_simplified_suspension }
		
		equipment_bonus = {
			armor_value = 0.05
			defense = 0.02
		}
	}
	
	trait = {
		token = generic_mio_trait_improved_tracks
		name = generic_mio_trait_improved_tracks
		icon = GFX_generic_mio_trait_icon_maximum_speed

		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_armor_steel_working
		
		any_parent = { generic_mio_trait_armor_steel_working }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_reinforced_construction
		name = generic_mio_trait_reinforced_construction
		icon = GFX_generic_mio_trait_icon_reliability
		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_crew_ergonomics
		
		any_parent = { generic_mio_trait_crew_ergonomics }

		equipment_bonus = {
			reliability = 0.03
			hard_attack = 0.03
		}
	}

	trait = {
		token = generic_mio_trait_command_upgrades
		name = generic_mio_trait_command_upgrades
		icon = GFX_generic_mio_trait_icon_breakthrough
		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_reinforced_construction
		
		any_parent = { generic_mio_trait_reinforced_construction }

		equipment_bonus = {
			breakthrough = 0.05
			armor_value = 0.05
			build_cost_ic = 0.02
		}
	}
	
	trait = {
		token = generic_mio_trait_standardized_components
		name = generic_mio_trait_standardized_components
		icon = GFX_generic_mio_department_icon_tank_general_line_efficiency
		
		position = { x=2 y=1 }
		relative_position_id = generic_mio_trait_simplified_suspension
		
		all_parents = { generic_mio_trait_simplified_suspension generic_mio_trait_crew_ergonomics }

		equipment_bonus = {
			reliability = 0.05
		}
		
		production_bonus = {
			production_efficiency_gain_factor = 0.05
			production_resource_need_factor = -0.05
		}
	}
	
	trait = {
		token = generic_mio_trait_heavy_armored_hull
		name = generic_mio_trait_heavy_armored_hull
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_standardized_components
		
		all_parents = { generic_mio_trait_standardized_components }

		equipment_bonus = {
			hardness = 0.03
			breakthrough = 0.05
			build_cost_ic = 0.02
		}
	}

	trait = {
		token = generic_mio_trait_improved_tooling
		name = generic_mio_trait_improved_tooling
		icon = GFX_generic_mio_department_icon_tank_general_technology

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_heavy_armored_hull
		
		all_parents = { generic_mio_trait_improved_tracks generic_mio_trait_heavy_armored_hull generic_mio_trait_command_upgrades }

		production_bonus = {
			production_efficiency_cap_factor = 0.03
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_mass_production
		name = generic_mio_trait_mass_production
		icon = GFX_generic_mio_department_icon_tank_general_production
		
		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_improved_tooling
		
		any_parent = { generic_mio_trait_improved_tooling }
		
		mutually_exclusive = { generic_mio_trait_quality_improvements }
		
		production_bonus = {
			production_cost_factor = -0.05
			production_efficiency_gain_factor = 0.1
		}

		equipment_bonus = {
			reliability = -0.05
			hardness = -0.05
			breakthrough = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_quality_improvements
		name = generic_mio_trait_quality_improvements
		icon = GFX_generic_mio_department_icon_tank_general_armor
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_improved_tooling
		
		any_parent = { generic_mio_trait_improved_tooling }
		
		mutually_exclusive = { generic_mio_trait_mass_production}
		
		equipment_bonus = {
			armor_value = 0.1
			defense = 0.1
			reliability = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.1
		}
	}

	trait = {
		token = generic_mio_trait_defensive_equipment
		name = generic_mio_trait_defensive_equipment
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_crew_ergonomics
		
		equipment_bonus = {
			build_cost_ic = 0.01
			reliability = 0.03
			soft_attack = 0.02
			defense = 0.02
		}
	}

	trait = {
		token = generic_mio_trait_gun_improvements
		name = generic_mio_trait_gun_improvements
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_defensive_equipment
		
		all_parents = { generic_mio_trait_crew_ergonomics generic_mio_trait_defensive_equipment }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			build_cost_ic = 0.03
		}
	}
	
	trait = {
		token = generic_mio_trait_long_barreled_guns
		name = generic_mio_trait_long_barreled_guns
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_gun_improvements
		
		all_parents = { generic_mio_trait_gun_improvements }

		equipment_bonus = {
			ap_attack = 0.05
			hard_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_anti_tank_specialization
		name = generic_mio_trait_anti_tank_specialization
		icon = GFX_generic_mio_trait_icon_hard_attack
		
		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_long_barreled_guns
		
		any_parent = { generic_mio_trait_long_barreled_guns }
		
		mutually_exclusive = { generic_mio_trait_infantry_support_tanks }
		
		equipment_bonus = {
			armor_value = 0.05
			hard_attack = 0.05
			reliability = 0.05
			build_cost_ic = 0.03
		}
	}

	trait = {
		token = generic_mio_trait_advanced_armor_design
		name = generic_mio_trait_advanced_armor_design
		icon = GFX_generic_mio_trait_icon_armor_value
		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_anti_tank_specialization
		
		all_parents = { generic_mio_trait_anti_tank_specialization }
		
		equipment_bonus = {
			hardness = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_infantry_support_tanks
		name = generic_mio_trait_infantry_support_tanks
		icon = GFX_generic_mio_trait_icon_soft_attack
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_long_barreled_guns
		
		any_parent = { generic_mio_trait_long_barreled_guns }
		
		mutually_exclusive = { generic_mio_trait_anti_tank_specialization }
		
		equipment_bonus = {
			soft_attack = 0.05
			reliability = -0.05
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = generic_mio_trait_barrels_of_hell
		name = generic_mio_trait_barrels_of_hell
		icon = GFX_generic_mio_trait_icon_soft_attack
		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_infantry_support_tanks
		
		any_parent = { generic_mio_trait_infantry_support_tanks }
		
		equipment_bonus = {
			soft_attack = 0.05
			breakthrough = 0.05
		}
	}
}


SOV_okmo_organization = {
	icon = GFX_idea_okmo
	
	allowed = {	
		OR = {
			tag = SOV 
			# AND = {
			# 	tag = BUL
			# 	has_dlc = "Battle for the Bosporus"
			# }
		}
	}

	available = {
		IF = {
			limit = { FROM = { original_tag = SOV } } 
			OR = {
				FROM = { has_completed_focus = SOV_mil26 }
				FROM = { has_completed_focus = SOV_found_state_defense_committee }
			}
		} 
	}

	equipment_type = { mio_cat_eq_all_medium_tank }
	research_categories = { mio_cat_tech_all_armor_and_modules }

	tree_header_text = {
		text = mio_header_engine_and_suspension
		x = 1
	}

	tree_header_text = {
		text = mio_header_armament
		x = 3
	}

	tree_header_text = {
		text = mio_header_production
		x = 6
	}

	tree_header_text = {
		text = mio_header_armor
		x = 9
	}

	initial_trait = {
		name = generic_mio_initial_trait_infantry_tanks_designer
		
		limit_to_equipment_type = { 
			mio_cat_eq_all_medium_tank
		}
		
		equipment_bonus = {
			armor_value = 0.05
			maximum_speed =-0.05
		}
	}

	trait = {
		token = generic_mio_trait_single_engine
		name = generic_mio_trait_single_engine
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=0 y=0 }

		mutually_exclusive = { generic_mio_trait_dual_engine_redundancy }
		
		equipment_bonus = {
			breakthrough = 0.05
		}
	}



	trait = {
		token = generic_mio_trait_dual_engine_redundancy
		name = generic_mio_trait_dual_engine_redundancy
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=2 y=0 }

		mutually_exclusive = { generic_mio_trait_single_engine }
		
		equipment_bonus = {
			reliability = 0.05
		}


	}

	trait = {
		token = okmo_trait_mass_small_arms_ammunition_production
		name = okmo_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=8 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}
			
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_interleaved_track_wheels
		name = generic_mio_trait_interleaved_track_wheels
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_single_engine

		any_parent = { generic_mio_trait_single_engine generic_mio_trait_dual_engine_redundancy }

		mutually_exclusive = { generic_mio_trait_overlapped_track_wheels }

		equipment_bonus = {
			maximum_speed = 0.075
		}

		production_bonus = {
			production_cost_factor = 0.04
		}
	}

	trait = {
		token = generic_mio_trait_overlapped_track_wheels
		name = generic_mio_trait_overlapped_track_wheels
		icon = GFX_generic_mio_trait_icon_defense
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_dual_engine_redundancy
		
		any_parent = { generic_mio_trait_single_engine generic_mio_trait_dual_engine_redundancy }

		mutually_exclusive = { generic_mio_trait_interleaved_track_wheels }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_battle_tank_specifications
		name = generic_mio_trait_battle_tank_specifications
		icon = GFX_generic_mio_department_icon_tank_general_armor
		
		position = { x=6 y=0 }

		equipment_bonus = {
			armor_value = 0.03
			defense = 0.03
		}
	}

	trait = {
		token = generic_mio_trait_adaptable_turret_ring
		name = generic_mio_trait_adaptable_turret_ring
		icon = GFX_generic_mio_trait_icon_hard_attack
		
		position = { x=-3 y=1 }
		relative_position_id = generic_mio_trait_battle_tank_specifications
		
		any_parent = { generic_mio_trait_battle_tank_specifications }

		equipment_bonus = {
			soft_attack = 0.04
			hard_attack = 0.04
			ap_attack = 0.04
		}
	}

	trait = {
		token = generic_mio_trait_turret_sights
		name = generic_mio_trait_turret_sights
		icon = GFX_generic_mio_trait_icon_breakthrough
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_adaptable_turret_ring

		any_parent = { generic_mio_trait_adaptable_turret_ring }

		equipment_bonus = {
			soft_attack = 0.04
			hard_attack = 0.04
			breakthrough = 0.04
		}
	}

	trait = {
		token = generic_mio_trait_close_support_role
		name = generic_mio_trait_close_support_role
		icon = GFX_generic_mio_trait_icon_soft_attack
		
		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_battle_tank_specifications
	
		any_parent = { generic_mio_trait_battle_tank_specifications }
		
		mutually_exclusive = { generic_mio_trait_anti_tank_role }
		
		equipment_bonus = {
			soft_attack = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_anti_tank_role
		name = generic_mio_trait_anti_tank_role
		icon = GFX_generic_mio_trait_icon_hard_attack
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_battle_tank_specifications
		
		any_parent = { generic_mio_trait_battle_tank_specifications }
		
		mutually_exclusive= { generic_mio_trait_close_support_role }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}
	trait = {
		token = generic_mio_trait_adaptable_chassis
		name = generic_mio_trait_adaptable_chassis
		icon = GFX_generic_mio_department_icon_tank_general_technology
		
		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_close_support_role
		
		any_parent = { generic_mio_trait_close_support_role generic_mio_trait_anti_tank_role }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			#production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_light_tank_specialization
		name = generic_mio_trait_light_tank_specialization
		icon = GFX_generic_mio_department_icon_tank_light_tank_production
		
		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_adaptable_chassis
		
		any_parent = { generic_mio_trait_adaptable_chassis }
		
		mutually_exclusive= { generic_mio_trait_medium_tank_specialization generic_mio_trait_heavy_tank_specialization }

		limit_to_equipment_type = { mio_cat_eq_all_medium_tank }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}
	trait = {
		token = generic_mio_trait_medium_tank_specialization
		name = generic_mio_trait_medium_tank_specialization
		icon = GFX_generic_mio_department_icon_tank_medium_tank_production
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_adaptable_chassis

		any_parent = { generic_mio_trait_adaptable_chassis }
		
		mutually_exclusive= { generic_mio_trait_light_tank_specialization generic_mio_trait_heavy_tank_specialization }
		
		limit_to_equipment_type = { mio_cat_eq_all_medium_tank }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_heavy_tank_specialization
		name = generic_mio_trait_heavy_tank_specialization
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_production
		
		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_adaptable_chassis

		any_parent = { generic_mio_trait_adaptable_chassis }
		
		mutually_exclusive= { generic_mio_trait_light_tank_specialization generic_mio_trait_medium_tank_specialization }
		
		limit_to_equipment_type = { mio_cat_eq_all_medium_tank }

		equipment_bonus = {
			armor_value = 0.1
		}
	}
	trait = {
		token = generic_mio_trait_thick_armor
		name = generic_mio_trait_thick_armor
		icon = GFX_generic_mio_department_icon_tank_general_armor
		
		position = { x=3 y=1 }
		relative_position_id = generic_mio_trait_battle_tank_specifications
	
		any_parent = { generic_mio_trait_battle_tank_specifications }
		
		equipment_bonus = {
			armor_value = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_even_thicker_armor
		name = generic_mio_trait_even_thicker_armor
		icon = GFX_generic_mio_department_icon_tank_general_armor
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_thick_armor
		
		any_parent = { generic_mio_trait_thick_armor }
		
		equipment_bonus = {
			armor_value = 0.05
		}
	}


	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}
		# ELSE = {
		# 	OR = {
		# 		FROM = { has_completed_focus = SOV_depoliticize_industry }
		# 		AND = {
		# 			FROM = { has_completed_focus = SOV_tank1 }
		# 			FROM = { has_completed_focus = SOV_new_corps }
		# 		}
		# 	}
		# }

		IF = {
			limit = { FROM = { original_tag = BUL } }
			custom_trigger_tooltip = {
				tooltip = has_invited_mio_tt
				FROM = {
					has_country_flag = has_invited_okmo_mio_flag
				}
			}
			FROM = {
				OR = {
					is_subject = no
					is_subject_of = SOV
				}
				#is_in_faction_with = SOV
				#NOT = { has_completed_focus = BUL_nationalization }
			}
		}
	}
	
	# override_trait = {
	# 	token = generic_mio_trait_thick_armor
	# 	position = { x=2 y=1 }
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_174
	# 	name = SOV_merge_tank_plant
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_maximum_speed
	# 	special_trait_background = yes

	# 	position = { x=@tank_1_X y=@tank_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = { #Two FROM blocs to provide two different check marks in the UI
	# 		FROM = {
	# 			has_full_control_of_state = 195 #LENINGRAD
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_174_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		maximum_speed = @tank_max_speed
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_112
	# 	name = SOV_merge_tank_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@tank_2_X y=@tank_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 252 #GORKY
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_112_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @tank_production_capacity_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_ural_heavy_machine_building_plant
	# 	name = SOV_merge_tank_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_soft_attack
	# 	special_trait_background = yes

	# 	position = { x=@tank_3_X y=@tank_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 653 #SVERDLOVSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_ural_heavy_machine_building_plant_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		soft_attack = @tank_soft_attack
	# 	}
	# }
}




SOV_morozov_design_bureau_ac_organization = {
	icon = GFX_idea_morozov_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV
			AND = {
				tag = MEX 
				has_dlc = "Man the Guns"
			}
			AND = {
				OR = {
					is_literally_china = yes
					#tag = MAN
					#tag = MEN
				} 
				has_dlc = "Waking the Tiger"
			}
			NOR_AAT = yes
		}
	}

	available = {
		IF = {
			limit = { FROM = { original_tag = SOV } } 
			FROM = { has_completed_focus = SOV_mil39 }
		}
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = {
				FROM = { tag = MEX }
			}
			FROM = { is_in_faction_with = SOV }
		}
		ELSE_IF = {
			limit = {
				FROM = {
					OR = {
						is_literally_china = yes
						tag = MAN
						#tag = MEN
					}
				} 
			}
			FROM = { has_completed_focus = CHI_hire_soviet_designer }
		}
		ELSE_IF = {
			limit = {
				FROM = { original_tag = NOR }
			}
			FROM = { has_completed_focus = NOR_invite_soviet_designers }
		}

	}

	equipment_type = { armored_car_chassis }
	research_categories = { cat_armored_cars }

	initial_trait = {
		name = generic_mio_initial_trait_standardized_production
		equipment_bonus = {
			armor_value = 0.1
			defense =0.1
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_simplified_suspension
		name = generic_mio_trait_simplified_suspension
		icon = GFX_generic_mio_trait_icon_reliability

		equipment_bonus = {
			reliability = 0.1
		}
		position = { x=1 y=0 }
	}


	trait = {
		token = bureau_ac_trait_mass_small_arms_ammunition_production
		name = bureau_ac_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=3 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}
	
	trait = {
		token = generic_mio_trait_crew_ergonomics
		name = generic_mio_trait_crew_ergonomics
		icon = GFX_generic_mio_trait_icon_defense


		equipment_bonus = {
			maximum_speed = 0.04
			defense = 0.04
		}
		position = { x=4 y=0 }
		relative_position_id = generic_mio_trait_simplified_suspension
	}
	
	trait = {
		token = generic_mio_trait_reinforced_wheels
		name = generic_mio_trait_reinforced_wheels
		icon = GFX_generic_mio_department_icon_armored_car_engine
		any_parent = { generic_mio_trait_simplified_suspension }

		equipment_bonus = {
			reliability = 0.05
			maximum_speed = 0.05
		}
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_simplified_suspension
	}

	trait = {
		token = generic_mio_trait_command_upgrades
		name = generic_mio_trait_command_upgrades
		icon = GFX_generic_mio_trait_icon_breakthrough
		any_parent = { generic_mio_trait_crew_ergonomics }


		equipment_bonus = {
			breakthrough = 0.1
		}
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_crew_ergonomics
	}
	
	trait = {
		token = generic_mio_trait_standardized_components
		name = generic_mio_trait_standardized_components
		icon = GFX_generic_mio_department_icon_armored_car_line_efficiency
		all_parents = { generic_mio_trait_simplified_suspension generic_mio_trait_crew_ergonomics }


		position = { x=2 y=1 }
		relative_position_id = generic_mio_trait_simplified_suspension

		production_bonus = {
			production_efficiency_gain_factor = 0.075
			production_resource_need_factor = -0.075
		}
	}

	trait = {
		token = generic_mio_trait_improved_tooling
		name = generic_mio_trait_improved_tooling
		icon = GFX_generic_mio_department_icon_armored_car_technology

		all_parents = { generic_mio_trait_reinforced_wheels generic_mio_trait_standardized_components generic_mio_trait_command_upgrades }

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_standardized_components

		production_bonus = {
			production_efficiency_cap_factor = 0.15
		}
	}

	trait = {
		token = generic_mio_trait_mass_production
		name = generic_mio_trait_mass_production
		icon = GFX_generic_mio_department_icon_armored_car_production
		any_parent = { generic_mio_trait_improved_tooling }
		mutually_exclusive = { generic_mio_trait_quality_improvements }

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_improved_tooling

		production_bonus = {
			production_cost_factor = -0.05
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_quality_improvements
		name = generic_mio_trait_quality_improvements
		icon = GFX_generic_mio_department_icon_tank_general_armor
		any_parent = { generic_mio_trait_improved_tooling }
		mutually_exclusive = { generic_mio_trait_mass_production}

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_improved_tooling

		equipment_bonus = {
			armor_value = 0.15
			defense = 0.15
		}
	}

	trait = {
		token = generic_mio_trait_defensive_equipment
		name = generic_mio_trait_defensive_equipment
		icon = GFX_generic_mio_trait_icon_soft_attack

		equipment_bonus = {
			soft_attack = 0.04
			defense = 0.04
		}
		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_crew_ergonomics
	}

	trait = {
		token = generic_mio_trait_long_barreled_guns
		name = generic_mio_trait_long_barreled_guns
		icon = GFX_generic_mio_department_icon_armored_car_offense

		all_parents = { generic_mio_trait_crew_ergonomics generic_mio_trait_defensive_equipment }

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_defensive_equipment

		equipment_bonus = {
			ap_attack = 0.1
			hard_attack = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_heavy_anti_tank_gun
		name = generic_mio_trait_heavy_anti_tank_gun
		icon = GFX_generic_mio_trait_icon_hard_attack
		any_parent = { generic_mio_trait_long_barreled_guns }
		mutually_exclusive = { generic_mio_trait_officer_support_car }

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_long_barreled_guns

		equipment_bonus = {
			armor_value = 0.1
			hard_attack = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_officer_support_car
		name = generic_mio_trait_officer_support_car
		icon = GFX_generic_mio_trait_icon_soft_attack
		any_parent = { generic_mio_trait_long_barreled_guns }
		mutually_exclusive = { generic_mio_trait_heavy_anti_tank_gun }

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_long_barreled_guns

		equipment_bonus = {
			soft_attack = 0.1
			build_cost_ic = -0.03
		}
	}
}


SOV_tankograd_plant_organization = {
	icon = GFX_idea_SOV_mytishchy_machine_building_plant
	
	allowed = {	
		OR = {
			tag = SOV
			AND = {
				tag = ETH 
				has_dlc = "By Blood Alone"
			}
		}
	}

	visible = {
		IF = {
			limit = { FROM = { original_tag = ETH } } 
			FROM = { has_completed_focus = ETH_mytishchi-ababa_plant }
		}
	}

	available = {
		IF = {
			limit = { FROM = { original_tag = SOV } } 
			FROM = { has_completed_focus = SOV_heavy_tankograd }
		}
	}



	equipment_type = {
		armor
		#support_equipment
		#train_equipment
		#railway_gun_equipment
	}

	research_categories = {
		armor
		#support_tech
		#train_tech
	}


	initial_trait = {
		token = generic_mio_initial_trait_tank_refurbishment_plant
		name = generic_mio_initial_trait_tank_refurbishment_plant

		limit_to_equipment_type = { armor }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		production_bonus = {
			production_conversion_speed_factor = 0.1
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_enemy_tank_refitting
		name = generic_mio_trait_enemy_tank_refitting
		icon = GFX_generic_mio_department_icon_tank_general_conversion

		position = { x=1 y=0 }

		limit_to_equipment_type = { armor }

		production_bonus = {
			production_conversion_speed_factor = 0.1
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = generic_mio_trait_efficient_scrap_recycling
		name = generic_mio_trait_efficient_scrap_recycling
		icon = GFX_generic_mio_trait_icon_hardness
		
		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_enemy_tank_refitting

		any_parent = { generic_mio_trait_enemy_tank_refitting }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			hardness = -0.06
		}

		production_bonus = {
			production_resource_need_factor = -0.075
		}
	}

	trait = {
		token = generic_mio_trait_high_volume_smelter
		name = generic_mio_trait_high_volume_smelter
		icon = GFX_generic_mio_department_icon_tank_general_production
		
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_efficient_scrap_recycling

		any_parent = { generic_mio_trait_efficient_scrap_recycling }

		limit_to_equipment_type = { armor }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_high_powered_engine_production
		name = generic_mio_trait_high_powered_engine_production
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_enemy_tank_refitting

		any_parent = { generic_mio_trait_enemy_tank_refitting }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_heavy_duty_machine_tools
		name = generic_mio_trait_heavy_duty_machine_tools
		icon = GFX_generic_mio_department_icon_tank_general_production

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_high_volume_smelter

		all_parents = { generic_mio_trait_high_powered_engine_production generic_mio_trait_high_volume_smelter }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.04
			production_efficiency_cap_factor = 0.04
		}
	}

	trait = {
		token = generic_mio_trait_multi_plant_cooperation
		name = generic_mio_trait_multi_plant_cooperation
		icon = GFX_generic_mio_department_icon_tank_general_line_efficiency

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_heavy_duty_machine_tools

		any_parent = { generic_mio_trait_heavy_duty_machine_tools }

		limit_to_equipment_type = { armor }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_standardized_secondary_armament
		name = generic_mio_trait_standardized_secondary_armament
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=3 y=0 }
		relative_position_id = generic_mio_trait_enemy_tank_refitting

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_mass_small_arms_ammunition_production
		name = generic_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_standardized_secondary_armament

		any_parent = { generic_mio_trait_standardized_secondary_armament }

		limit_to_equipment_type = { armor support_equipment }
		
		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_plant_tech_exchange
		name = generic_mio_trait_plant_tech_exchange
		icon = GFX_generic_mio_department_icon_facilities
		
		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_standardized_secondary_armament

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
	}


	trait = {
		token = generic_mio_trait_24h_rotation_shifts
		name = generic_mio_trait_24h_rotation_shifts
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_plant_tech_exchange
	
		any_parent = { generic_mio_trait_plant_tech_exchange }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_dual_plant_main_armament_production
		name = generic_mio_trait_dual_plant_main_armament_production
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_mass_small_arms_ammunition_production

		all_parents = { generic_mio_trait_mass_small_arms_ammunition_production generic_mio_trait_24h_rotation_shifts }
		
		limit_to_equipment_type = { armor }

		equipment_bonus = {
			soft_attack = 0.05
			reliability = -0.05
		}
		
		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_long_distance_escort
		name = generic_mio_trait_long_distance_escort
		icon = GFX_generic_mio_trait_icon_anti_air_attack
		
		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_plant_tech_exchange

		limit_to_equipment_type = { train_equipment }

		equipment_bonus = {
			armor_value = 0.06
			air_attack = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_barrels_of_hell
		name = generic_mio_trait_barrels_of_hell
		icon = GFX_generic_mio_trait_icon_production_capacity
		
		position = { x=0 y=4 }
		relative_position_id = generic_mio_trait_long_distance_escort

		limit_to_equipment_type = { railway_gun_equipment }

		all_parents = { generic_mio_trait_24h_rotation_shifts generic_mio_trait_long_distance_escort }
		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = tankograd_trait_mass_small_arms_ammunition_production
		name = tankograd_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=0 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}
}

SOV_kirov_organization = {
	icon = GFX_idea_SOV_kirov
	
	allowed = {	
		OR = {
			original_tag = SOV
			AND = {
				tag = BEL
				has_dlc = "Gotterdammerung"
			}
		}
	}

	available = {
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
		}
		IF = {
			limit = { FROM = { original_tag = SOV } } 
			OR = {
				FROM = { has_completed_focus = SOV_mil27 }
				FROM = { has_completed_focus = SOV_found_state_defense_committee }
			}
		}
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = { 
				FROM = { 
					original_tag = BEL 
				} 
			}

			FROM = { has_completed_focus = BEL_invite_soviet_tank_makers }
		}
	}


		equipment_type = {
			mio_cat_eq_all_heavy_tank
		#armor
		#support_equipment
		#train_equipment
		#railway_gun_equipment
	}

	research_categories = {
		#armor
		#support_tech
		#train_tech
		mio_cat_tech_heavy_armor_and_modules
	}


	initial_trait = {
		name = generic_mio_initial_trait_heavy_tank_designer

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
		
		equipment_bonus = {
			armor_value = 0.05
			reliability = -0.1
		}
	}

	trait = {
		token = generic_mio_trait_wide_tracks
		name = generic_mio_trait_wide_tracks
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=1 y=0 }
		
		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_fire_extinguishers
		name = generic_mio_trait_fire_extinguishers
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_quality

		position = { x=0 y=4 }
		relative_position_id = generic_mio_trait_wide_tracks

		all_parents = { generic_mio_trait_wide_tracks }
		
		equipment_bonus = {
			reliability = 0.05
			breakthrough = 0.02
		}
	}

	trait = {
		token = generic_mio_trait_one_piece_hull_side_coverings
		name = generic_mio_trait_one_piece_hull_side_coverings
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_technology

		position = { x=4 y=0 }
		relative_position_id = generic_mio_trait_wide_tracks
		
		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_simplified_transmission_system
		name = generic_mio_trait_simplified_transmission_system
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_line_efficiency

		position = { x=2 y=2 }
		relative_position_id = generic_mio_trait_wide_tracks

		all_parents = { generic_mio_trait_wide_tracks generic_mio_trait_one_piece_hull_side_coverings }
		
		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_improved_engine_output
		name = generic_mio_trait_improved_engine_output
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_simplified_transmission_system

		all_parents = { generic_mio_trait_simplified_transmission_system }
		
		equipment_bonus = {
			maximum_speed = 0.05
			fuel_consumption = -0.05
		}
	}

	trait = {
		token = generic_mio_trait_sloping_armor
		name = generic_mio_trait_sloping_armor
		icon = GFX_generic_mio_department_icon_tank_general_armor

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_one_piece_hull_side_coverings

		all_parents = { generic_mio_trait_one_piece_hull_side_coverings }
		
		equipment_bonus = {
			armor_value = 0.04
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_improved_crew_ergonomics
		name = generic_mio_trait_improved_crew_ergonomics
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_sloping_armor

		all_parents = { generic_mio_trait_sloping_armor }

		mutually_exclusive = { generic_mio_trait_reinforced_construction }
		
		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_reinforced_construction
		name = generic_mio_trait_reinforced_construction
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_sloping_armor

		all_parents = { generic_mio_trait_sloping_armor }

		mutually_exclusive = { generic_mio_trait_improved_crew_ergonomics }
		
		equipment_bonus = {
			armor_value = 0.04
		}
	}

	trait = {
		token = generic_mio_trait_fully_cast_turret
		name = generic_mio_trait_fully_cast_turret
		icon = GFX_generic_mio_department_icon_tank_general_armor

		position = { x=3 y=0 }
		relative_position_id = generic_mio_trait_one_piece_hull_side_coverings
		
		equipment_bonus = {
			armor_value = 0.04
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_commander_cupola
		name = generic_mio_trait_commander_cupola
		icon = GFX_generic_mio_department_icon_tank_general_armor

		position = { x=-1 y=2 }
		relative_position_id = generic_mio_trait_fully_cast_turret

		all_parents = { generic_mio_trait_fully_cast_turret }

		mutually_exclusive = { generic_mio_trait_simplified_layout }
		
		equipment_bonus = {
			armor_value = 0.04
			defense = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_simplified_layout
		name = generic_mio_trait_simplified_layout
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_line_efficiency

		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_fully_cast_turret

		all_parents = { generic_mio_trait_fully_cast_turret }

		mutually_exclusive = { generic_mio_trait_commander_cupola }
		
		production_bonus = {
			production_efficiency_gain_factor = 0.05
			production_resource_penalty_factor = -0.075
		}
	}

	trait = {
		token = generic_mio_trait_high_explosive_shells
		name = generic_mio_trait_high_explosive_shells
		icon = GFX_generic_mio_department_icon_tank_general_weapons

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_commander_cupola

		any_parent = { generic_mio_trait_commander_cupola generic_mio_trait_simplified_layout }

		mutually_exclusive = { generic_mio_trait_apcr_hvap_shells }
		
		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.03
		}
	}

	trait = {
		token = generic_mio_trait_apcr_hvap_shells
		name = generic_mio_trait_apcr_hvap_shells
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_simplified_layout

		any_parent = { generic_mio_trait_commander_cupola generic_mio_trait_simplified_layout }

		mutually_exclusive = { generic_mio_trait_high_explosive_shells }
		
		equipment_bonus = {
			ap_attack = 0.05
			hard_attack = 0.05
		}
	}

		trait = {
		token = kirov_trait_mass_small_arms_ammunition_production
		name = kirov_mio_trait_mass_small_arms_ammunition_production
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x=0 y=0 }

		
		available = {
			FROM = {
				OR = {
					has_completed_focus = SOV_army_top31
					has_completed_focus = SOV_army_voro
				}
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		equipment_bonus = {
			reliability = -0.05
		}
	}
	

	

	# override_trait = {
	# 	token = generic_mio_trait_wide_tracks

	# 	position = { x=0 y=0 }
	# }

	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}
		# ELSE = {
		# 	OR = {
		# 		FROM = { has_completed_focus = SOV_depoliticize_industry }
		# 		AND = {
		# 			FROM = { has_completed_focus = SOV_tank1 }
		# 			FROM = { has_completed_focus = SOV_new_corps4 }
		# 		}
		# 	}
		# }
	}

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_174
	# 	name = SOV_merge_tank_plant
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_maximum_speed
	# 	special_trait_background = yes

	# 	position = { x=@tank_1_X y=@tank_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = { #Two FROM blocs to provide two different check marks in the UI
	# 		FROM = {
	# 			has_full_control_of_state = 195 #LENINGRAD
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_174_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		maximum_speed = @tank_max_speed
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_112
	# 	name = SOV_merge_tank_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@tank_2_X y=@tank_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 252 #GORKY
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_plant_no_112_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @tank_production_capacity_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_ural_heavy_machine_building_plant
	# 	name = SOV_merge_tank_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_soft_attack
	# 	special_trait_background = yes

	# 	position = { x=@tank_3_X y=@tank_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 653 #SVERDLOVSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_ural_heavy_machine_building_plant_flag
	# 		}
	# 	}

	# 	equipment_bonus = {
	# 		soft_attack = @tank_soft_attack
	# 	}
	# }
	
}





 ######  ##     ## #### ########   ######  
##    ## ##     ##  ##  ##     ## ##    ## 
##       ##     ##  ##  ##     ## ##       
 ######  #########  ##  ########   ######  
      ## ##     ##  ##  ##              ## 
##    ## ##     ##  ##  ##        ##    ## 
 ######  ##     ## #### ##         ######  

SOV_nevskoye_design_bureau_organization = {
	include = generic_battle_line_ship_organization
	icon = GFX_idea_nevskoye_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV 
			# AND = {
			# 	tag = BUL
			# 	has_dlc = "Battle for the Bosporus"
			# }
		}
	}
	
	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = { FROM = { original_tag = BUL } }
			custom_trigger_tooltip = {
				tooltip = has_invited_mio_tt
				FROM = {
					has_country_flag = has_invited_nevskoye_mio_flag
				}
			}
			FROM = {
				OR = {
					is_subject = no
					is_subject_of = SOV
				}
				#is_in_faction_with = SOV
				#NOT = { has_completed_focus = BUL_nationalization }
			}
		}
	}

	add_trait = { #MTG version
		token = SOV_mio_trait_merge_plant_no_370
		name = SOV_merge_ship_plant_4_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			has_dlc = "Man the Guns"
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_370_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_370_flag
				add_tech_bonus = {
					name = SOV_merge_ship_plant_2_baltic
					bonus = 1
					uses = 1
					category = naval_mines
				}
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}

		equipment_bonus = {
			mines_planting = @ship_mines_planting
		}
	}

	add_trait = { #No-MTG version
		token = SOV_mio_trait_merge_plant_no_370_no_mtg
		name = SOV_merge_ship_plant_4_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			NOT = { has_dlc = "Man the Guns" }
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_370_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_370_flag
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_5
		name = SOV_merge_ship_plant_1_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_screen_ship_production
		special_trait_background = yes

		position = { x=@ship_2_X y=@ship_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }

		production_bonus = {
			production_cost_factor = @ship_cruiser_production_cost_factor
		}
	}
}

SOV_rubin_design_bureau_organization = {
	include = generic_raider_ship_organization
	icon = GFX_idea_SOV_rubin_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV
			AND = {
				tag = ETH 
				has_dlc = "By Blood Alone"
			}
			AND = {
				tag = ARG
				has_dlc = "Trial of Allegiance"
			}
			AND = {
				tag = BRA
				has_dlc = "Trial of Allegiance"
			}
			NOR_AAT = yes
		}
	}

	visible = {
		IF = { 
			limit = { FROM = { original_tag = ETH } } 
			FROM = { has_completed_focus = ETH_soviet-ethiopian_trade_agreement }
		}
	}

	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = {
				FROM = { original_tag = NOR }
			}
			FROM = { has_completed_focus = NOR_invite_soviet_designers }
		}

		IF = {
			limit = {
				FROM = { original_tag = ARG }
			}
			FROM = { has_completed_focus = ARG_russian_manufacturers }
		}

		IF = {
			limit = {
				FROM = { original_tag = BRA }
			}
			FROM = { has_completed_focus = BRA_soviet_arms_industry }
		}
	}

	add_trait = { #MTG version
		token = SOV_mio_trait_merge_plant_no_370
		name = SOV_merge_ship_plant_4_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			has_dlc = "Man the Guns"
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_370_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_370_flag
				add_tech_bonus = {
					name = SOV_merge_ship_plant_2_baltic
					bonus = 1
					uses = 1
					category = naval_mines
				}
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser mio_cat_eq_all_destroyer ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}

		equipment_bonus = {
			mines_planting = @ship_mines_planting
		}
	}

	add_trait = { #No-MTG version
		token = SOV_mio_trait_merge_plant_no_370_no_mtg
		name = SOV_merge_ship_plant_4_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			NOT = { has_dlc = "Man the Guns" }
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_370_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_370_flag
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser mio_cat_eq_all_destroyer ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_363
		name = SOV_merge_ship_plant_2_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_screen_ship_production
		special_trait_background = yes

		position = { x=@ship_2_X y=@ship_2_Y }

		mutually_exclusive = { SOV_mio_trait_merge_plant_no_190 }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
				#has_completed_focus = SOV_surface_warfare
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { mio_cat_eq_all_destroyer }

		production_bonus = {
			production_cost_factor = @ship_destroyer_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_190
		name = SOV_merge_ship_plant_3_baltic
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_submarine_production
		special_trait_background = yes

		position = { x=@ship_3_X y=@ship_3_Y }

		mutually_exclusive = { SOV_mio_trait_merge_plant_no_363 }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 195 #LENINGRAD
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
				#has_completed_focus = SOV_submarine_warfare
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_submarine_production_cost_factor
		}
	}
}

SOV_black_sea_shipyard_organization = {
	include = generic_black_sea_fleet_organization
	icon = GFX_idea_SOV_black_sea_shipyard
	
	allowed = {	
		original_tag = SOV
	}

	tree_header_text = {
		text = mio_header_systems
		x = 1
	}

	tree_header_text = {
		text = mio_header_weapons
		x = 4
	}

	tree_header_text = {
		text = mio_header_production
		x = 7
	}

	override_trait = {
		token = generic_mio_advanced_periscope

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_anti_air_defense
	}

	override_trait = {
		token = generic_mio_trait_state_sponsored_growth

		position = { x=3 y=0 }
		relative_position_id = generic_mio_trait_anti_air_defense
	}

	add_trait = { #MTG version
		token = SOV_mio_trait_merge_mariupol_plant
		name = SOV_merge_ship_plant_4_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			has_dlc = "Man the Guns"
		}

		available = {
			FROM = {
				has_full_control_of_state = 227 #STALINO
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_mariupol_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_mariupol_plant_flag
				add_tech_bonus = {
					name = SOV_merge_ship_plant_2_baltic
					bonus = 1
					uses = 1
					category = naval_mines
				}
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser mio_cat_eq_all_destroyer ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}

		equipment_bonus = {
			mines_planting = @ship_mines_planting
		}
	}

	add_trait = { #No-MTG version
		token = SOV_mio_trait_merge_mariupol_plant_no_mtg
		name = SOV_merge_ship_plant_4_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			NOT = { has_dlc = "Man the Guns" }
		}

		available = {
			FROM = {
				has_full_control_of_state = 227 #STALINO
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_mariupol_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_mariupol_plant_flag
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser mio_cat_eq_all_destroyer ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_leninskaya_kuznitsa_plant
		name = SOV_merge_ship_plant_2_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_screen_ship_production
		special_trait_background = yes

		position = { x=@ship_2_X y=@ship_2_Y }

		mutually_exclusive = { SOV_mio_trait_merge_plant_no_340 }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 202 #KIEV
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
				#has_completed_focus = SOV_surface_warfare
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { mio_cat_eq_all_destroyer }

		production_bonus = {
			production_cost_factor = @ship_destroyer_production_cost_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_340
		name = SOV_merge_ship_plant_3_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_submarine_production
		special_trait_background = yes

		position = { x=@ship_3_X y=@ship_3_Y }

		mutually_exclusive = { SOV_mio_trait_merge_leninskaya_kuznitsa_plant }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 227 #STALINO
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
				#has_completed_focus = SOV_submarine_warfare
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { ship_hull_submarine }
		
		production_bonus = {
			production_cost_factor = @ship_submarine_production_cost_factor
		}
	}
}

SOV_sevastopol_marine_plant_organization = {
	include = generic_refurbishment_repair_organization
	icon = GFX_idea_SOV_sevastopol_marine_plant
	
	allowed = {	
		original_tag = SOV
	}

	tree_header_text = {
		text = mio_header_protection
		x = 3
	}

	tree_header_text = {
		text = mio_header_weapons
		x = 7
	}

	override_trait = {
		token = generic_mio_trait_foam_fire_extinguishers
		
		position = { x=4 y=0 }
		relative_position_id = generic_mio_trait_heavy_armored_hull
	}

	override_trait = {
		token = generic_mio_trait_counter_flooding_system
		
		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_isolated_firemains
	}

	add_trait = { #MTG version
		token = SOV_mio_trait_merge_mariupol_plant
		name = SOV_merge_ship_plant_4_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			has_dlc = "Man the Guns"
		}

		available = {
			FROM = {
				has_full_control_of_state = 227 #STALINO
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_mariupol_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_mariupol_plant_flag
				add_tech_bonus = {
					name = SOV_merge_ship_plant_2_baltic
					bonus = 1
					uses = 1
					category = naval_mines
				}
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}

		equipment_bonus = {
			mines_planting = @ship_mines_planting
		}
	}

	add_trait = { #No-MTG version
		token = SOV_mio_trait_merge_mariupol_plant_no_mtg
		name = SOV_merge_ship_plant_4_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_mines
		special_trait_background = yes

		position = { x=@ship_1_X y=@ship_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
			NOT = { has_dlc = "Man the Guns" }
		}

		available = {
			FROM = {
				has_full_control_of_state = 227 #STALINO
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_mariupol_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_mariupol_plant_flag
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }
		
		production_bonus = {
			production_cost_factor = @ship_production_capacity_factor
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_200
		name = SOV_merge_ship_plant_1_black_sea
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_department_icon_ship_screen_ship_production
		special_trait_background = yes

		position = { x=@ship_2_X y=@ship_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 197 #MYKOLAIV
			}
			FROM = {
				has_completed_focus = SOV_merge_naval_plants
			}
			#Only exists in this MIO
		}

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }

		production_bonus = {
			production_cost_factor = @ship_cruiser_production_cost_factor
		}
	}
}




########  ##          ###    ##    ## ########  ######  
##     ## ##         ## ##   ###   ## ##       ##    ## 
##     ## ##        ##   ##  ####  ## ##       ##       
########  ##       ##     ## ## ## ## ######    ######  
##        ##       ######### ##  #### ##             ## 
##        ##       ##     ## ##   ### ##       ##    ## 
##        ######## ##     ## ##    ## ########  ######  

SOV_mig_design_bureau_organization = {
	include = generic_light_aircraft_organization
	icon = GFX_idea_mig_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV
			AND = {
				tag = ETH 
				has_dlc = "By Blood Alone"
			}
			AND = {
				tag = ARG
				has_dlc = "Trial of Allegiance" 
			}
			AND = {
				tag = BRA
				has_dlc = "Trial of Allegiance" #TODO MH Change DLC
			}
		}
	}
	
	visible = {
		IF = { 
			limit = { FROM = { original_tag = ETH } } 
			FROM = { has_completed_focus = ETH_soviet-ethiopian_trade_agreement }
		}
		IF = { 
			limit = {
				FROM = { tag = BRA }
				has_dlc = "Trial of Allegiance"
			}
		}
	}

	available = {
		IF = { #Dissolve Bureau Purge
			limit = {
				FROM = { original_tag = SOV }
			}
			FROM = { NOT = { has_country_flag = SOV_mig_design_bureau_dissolved_flag } }
		}
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}
		IF = {
			limit = {
				FROM = { original_tag = ARG }
			}
			FROM = { has_completed_focus = ARG_russian_manufacturers }
		}
		IF = {
			limit = {
				FROM = { original_tag = BRA }
			}
			FROM = { has_completed_focus = BRA_soviet_arms_industry }
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_28_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_150_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 300
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_vef_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_ilyushin_design_bureau_organization = {
	include = generic_cas_aircraft_organization
	icon = GFX_idea_ilyushin_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV 
			# AND = {
			# 	tag = BUL
			# 	has_dlc = "Battle for the Bosporus"
			# }
		}
	}
	
	available = {
		IF = { #Dissolve Bureau Purge
			limit = {
				FROM = { original_tag = SOV }
			}
			FROM = { NOT = { has_country_flag = SOV_ilyushin_design_bureau_dissolved_flag } }
		}
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = { FROM = { original_tag = BUL } }
			custom_trigger_tooltip = {
				tooltip = has_invited_mio_tt
				FROM = {
					has_country_flag = has_invited_ilyushin_mio_flag
				}
			}
			FROM = {
				OR = {
					is_subject = no
					is_subject_of = SOV
				}
				#is_in_faction_with = SOV
				#NOT = { has_completed_focus = BUL_nationalization }
			}
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_28_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_150_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 300
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_vef_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_yakovlev_design_bureau_organization = {
	include = generic_naval_aircraft_organization
	icon = GFX_idea_yakovlev_design_bureau
	
	allowed = {	
		original_tag = SOV
	}

	available = {
		IF = { #Dissolve Bureau Purge
			limit = {
				FROM = { original_tag = SOV }
			}
			FROM = { NOT = { has_country_flag = SOV_yakovlev_design_bureau_dissolved_flag } }
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_28_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_150_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 300
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}
		
		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_vef_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}

SOV_tupolev_design_bureau_organization = {
	icon = GFX_idea_tupolev_design_bureau
	allowed = {	
		original_tag = SOV
	}

	available = {
		IF = { #Dissolve Bureau Purge
			limit = {
				FROM = { original_tag = SOV }
			}
			FROM = { NOT = { has_country_flag = SOV_tupolev_design_bureau_dissolved_flag } }
		}
	}

	tree_header_text = {
		text = mio_header_design_department
		x = 2
	}

	tree_header_text = {
		text = mio_header_operational_department
		x = 7
	}

	equipment_type = {
		mio_cat_eq_all_small_plane
		mio_cat_eq_all_medium_plane
		transport_plane_equipment
	}

	research_categories = { mio_cat_all_light_aircraft_and_modules mio_cat_all_medium_aircraft_and_modules }
	
	tree_header_text = {
		text = mio_header_light_aircraft
		x = 3
	}

	tree_header_text = {
		text = mio_header_medium_aircraft
		x = 6
	}

	initial_trait = {
		name = generic_mio_initial_trait_multi_role_aircraft_designer

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_ground_attack = 0.02
			naval_strike_attack = 0.02
			air_attack = 0.02
			air_defence = 0.02
		}
	}

	trait = {
		token = generic_mio_trait_armored_cockpit
		name = generic_mio_trait_armored_cockpit
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x=3 y=0 }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_defence = 0.05
			reliability = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_escort_designs
		name = generic_mio_trait_escort_designs
		icon = GFX_generic_mio_trait_icon_naval_range

		position = { x=3 y=0 }
		relative_position_id = generic_mio_trait_armored_cockpit

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = generic_mio_trait_light_airframe
		name = generic_mio_trait_light_airframe
		icon = GFX_generic_mio_department_icon_plane_light_line_efficiency

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_armored_cockpit

		all_parents = { generic_mio_trait_armored_cockpit generic_mio_trait_escort_designs }

		mutually_exclusive = { generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_medium_airframe
		name = generic_mio_trait_medium_airframe
		icon = GFX_generic_mio_department_icon_plane_medium_line_efficiency

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_escort_designs

		all_parents = { generic_mio_trait_armored_cockpit generic_mio_trait_escort_designs }

		mutually_exclusive = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_hardened_frames
		name = generic_mio_trait_hardened_frames
		icon = GFX_generic_mio_trait_icon_defense

		position = { x=-2 y=1 }
		relative_position_id = generic_mio_trait_light_airframe

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_belly_shackles
		name = generic_mio_trait_belly_shackles
		icon = GFX_generic_mio_department_icon_plane_light_combat

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_hardened_frames

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			air_ground_attack = 0.05
			naval_strike_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_oversized_propeller
		name = generic_mio_trait_oversized_propeller
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_light_airframe

		all_parents = { generic_mio_trait_light_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_variable_pitch_propellers
		name = generic_mio_trait_variable_pitch_propellers
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_medium_airframe

		all_parents = { generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			maximum_speed = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_upgraded_air_air_weapons
		name = generic_mio_trait_upgraded_air_air_weapons
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_medium_airframe

		all_parents = { generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_reinforced_wing_hardpoints
		name = generic_mio_trait_reinforced_wing_hardpoints
		icon = GFX_generic_mio_department_icon_plane_medium_combat

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_upgraded_air_air_weapons

		all_parents = { generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_ground_attack = 0.05
			naval_strike_attack = 0.05
			air_bombing = 0.05 #TODO_Manu: NOT WORKING
		}
	}


	trait = {
		token = generic_mio_trait_upgraded_engines
		name = generic_mio_trait_upgraded_engines
		icon = GFX_generic_mio_department_icon_plane_general_engine

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_light_airframe

		any_parent = { generic_mio_trait_light_airframe generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			maximum_speed = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_not_enough_guns_never_enough_guns
		name = generic_mio_trait_not_enough_guns_never_enough_guns
		icon = GFX_generic_mio_department_icon_plane_general_combat

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_upgraded_engines

		any_parent = { generic_mio_trait_light_airframe generic_mio_trait_medium_airframe }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_attack = 0.05
			air_ground_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_lengthened_wings
		name = generic_mio_trait_lengthened_wings
		icon = GFX_generic_mio_trait_icon_naval_range

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_upgraded_engines

		all_parents = { generic_mio_trait_upgraded_engines }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_range = 0.1
			air_attack = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bubble_canopy
		name = generic_mio_trait_bubble_canopy
		icon = GFX_generic_mio_trait_icon_defense

		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_not_enough_guns_never_enough_guns

		all_parents = { generic_mio_trait_not_enough_guns_never_enough_guns }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_fighter_specialization
		name = generic_mio_trait_fighter_specialization
		icon = GFX_generic_mio_department_icon_plane_general_engine

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_lengthened_wings

		all_parents = { generic_mio_trait_lengthened_wings generic_mio_trait_bubble_canopy }

		mutually_exclusive = { generic_mio_trait_bomber_specialization }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_attack = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = generic_mio_trait_bomber_specialization
		name = generic_mio_trait_bomber_specialization
		icon = GFX_generic_mio_department_icon_plane_general_combat

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_bubble_canopy

		all_parents = { generic_mio_trait_lengthened_wings generic_mio_trait_bubble_canopy }

		mutually_exclusive = { generic_mio_trait_fighter_specialization }

		limit_to_equipment_type = { mio_cat_eq_all_small_plane mio_cat_eq_all_medium_plane }

		equipment_bonus = {
			air_ground_attack = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
		}
	}



	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_28
		name = SOV_merge_aircraft_plant_1
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_build_cost_ic
		special_trait_background = yes

		position = { x=@aircraft_1_X y=@aircraft_1_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 251 #KUYBYSHEV
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_28_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_28_flag
			}
		}

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_plant_no_150
		name = SOV_merge_aircraft_plant_2
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_air_agility
		special_trait_background = yes

		position = { x=@aircraft_2_X y=@aircraft_2_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 219 #MOSCOW
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_plant_no_150_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_plant_no_150_flag
				add_resource = {
					type = aluminium
					amount = 300
					state = 219
				}
			}
		}

		equipment_bonus = {
			air_agility = @aircraft_air_agility
		}
	}

	add_trait = { 
		token = SOV_mio_trait_merge_vef_plant
		name = SOV_merge_aircraft_plant_3
		#icon = GFX_generic_mio_department_icon_facilities
		icon = GFX_generic_mio_trait_icon_detection
		special_trait_background = yes

		position = { x=@aircraft_3_X y=@aircraft_3_Y }
		
		visible = {
			FROM = { original_tag = SOV }
		}

		available = {
			FROM = {
				has_full_control_of_state = 808 #RIGA
			}
			FROM = {
				has_completed_focus = SOV_share10
			}
			FROM = {
				NOT = { has_country_flag = SOV_merge_vef_plant_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = SOV_merge_vef_plant_flag
				add_tech_bonus = {
					name = SOV_mio_trait_merge_vef_plant
					bonus = 1
					uses = 1
					category = radar_tech
				}
			}
		}

		equipment_bonus = {
			air_defence = @aircraft_air_defence
			surface_detection = @aircraft_surface_detection
			sub_detection = @aircraft_sub_detection
		}
	}
}






##     ##    ###    ######## ######## ########  #### ######## ##       
###   ###   ## ##      ##    ##       ##     ##  ##  ##       ##       
#### ####  ##   ##     ##    ##       ##     ##  ##  ##       ##       
## ### ## ##     ##    ##    ######   ########   ##  ######   ##       
##     ## #########    ##    ##       ##   ##    ##  ##       ##       
##     ## ##     ##    ##    ##       ##    ##   ##  ##       ##       
##     ## ##     ##    ##    ######## ##     ## #### ######## ######## 



SOV_grabin_design_bureau_organization = {
	include = generic_artillery_organization
	icon = GFX_idea_grabin_design_bureau
	
	allowed = {	
		OR = {
			tag = SOV 
			AND = {
				tag = GRE
				has_dlc = "Battle for the Bosporus"
			}
		}
	}
	
	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = { FROM = { original_tag = GRE } }
			FROM = {
				has_completed_focus = GRE_appeal_to_the_soviet_union 
			}
		}
	}

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_172
	# 	name = SOV_merge_materiel_plant_1_artillery
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_department_icon_artillery_production
	# 	special_trait_background = yes

	# 	position = { x=@materiel_1_X y=@materiel_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 398 #PERM
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 		#Only exists in this MIO
	# 	}

	# 	production_bonus = {
	# 		production_cost_factor = @artillery_production_cost_factor
	# 	}
	# }
	
	# add_trait = { 
	# 	token = SOV_mio_trait_merge_nkmz_plant
	# 	name = SOV_merge_materiel_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_efficiency_cap
	# 	special_trait_background = yes

	# 	position = { x=@materiel_2_X y=@materiel_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 227 #STALINO
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_nkmz_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_efficiency_cap_factor = @materiel_production_efficiency_cap_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_magnitogorsk_metallurgical_plant
	# 	name = SOV_merge_materiel_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@materiel_3_X y=@materiel_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 582 #MAGNITOGORSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_magnitogorsk_metallurgical_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @materiel_production_capacity_factor
	# 	}
	# }
}

SOV_tula_arms_plant_organization = {
	include = generic_infantry_equipment_organization	
	icon = GFX_idea_tula_arms_plant
	
	allowed = {	
		original_tag = SOV
	}

	tree_header_text = {
		text = mio_header_design_and_production
		x = 2.5
	}

	tree_header_text = {
		text = mio_header_anti_tank
		x = 7
	}

	override_trait = {
		token = generic_mio_trait_armor_piercing_rounds
		
		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_quality_materials
	}

	override_trait = {
		token = generic_mio_trait_advanced_barrel_forging
		
		position = { x=1 y=2 }
		relative_position_id = generic_mio_trait_drum_pattern_sights
	}

	override_trait = {
		token = generic_mio_trait_reinforced_stocks
		
		position = { x=3 y=0 }
		relative_position_id = generic_mio_trait_drum_pattern_sights
	}

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_plant_no_622
	# 	name = SOV_merge_materiel_plant_1_infantry
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_department_icon_infantry_production
	# 	special_trait_background = yes

	# 	position = { x=@materiel_1_X y=@materiel_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 399 #UDMURTIA (Izhevsk)
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 		#Only exists in this MIO
	# 	}

	# 	production_bonus = {
	# 		production_cost_factor = @infantry_equipment_production_cost_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_nkmz_plant
	# 	name = SOV_merge_materiel_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_efficiency_cap
	# 	special_trait_background = yes

	# 	position = { x=@materiel_2_X y=@materiel_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 227 #STALINO
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_nkmz_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_efficiency_cap_factor = @materiel_production_efficiency_cap_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_magnitogorsk_metallurgical_plant
	# 	name = SOV_merge_materiel_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@materiel_3_X y=@materiel_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 582 #MAGNITOGORSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_magnitogorsk_metallurgical_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @materiel_production_capacity_factor
	# 	}
	# }
}

SOV_gaz_organization = {
	include = generic_motorized_mechanized_organization
	icon = GFX_idea_gaz
	
	allowed = {	
		OR = {
			tag = SOV 
			# AND = {
			# 	tag = BUL
			# 	has_dlc = "Battle for the Bosporus"
			# }
			AND = {
				tag = ETH 
				has_dlc = "By Blood Alone"
			}
			AND = {
				tag = ARG
				has_dlc = "Trial of Allegiance" #TODO_Eildih fix DLC
			}
			AND = {
				tag = BRA
				has_dlc = "Trial of Allegiance" #TODO MH fix DLC
			}
			AND = {
				tag = AFG
				has_dlc = "Graveyard of Empires"
			}
			NOR_AAT = yes
		}
	}

	visible = {
		IF = { 
			limit = { FROM = { original_tag = ETH } } 
			FROM = { has_completed_focus = ETH_soviet-ethiopian_trade_agreement }
		}
	}
	
	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = SOV } }
			}
#			FROM = { NOT = { has_war_with = SOV } }
		}

		IF = {
			limit = { FROM = { original_tag = BUL } }
			custom_trigger_tooltip = {
				tooltip = has_invited_mio_tt
				FROM = {
					has_country_flag = has_invited_gaz_mio_flag
				}
			}
			FROM = {
				OR = {
					is_subject = no
					is_subject_of = SOV
				}
				#is_in_faction_with = SOV
				#NOT = { has_completed_focus = BUL_nationalization }
			}
		}
		ELSE_IF = {
			limit = {
				FROM = { original_tag = NOR }
			}
			FROM = { has_completed_focus = NOR_invite_soviet_designers }
		}

		IF = {
			limit = {
				FROM = { original_tag = ARG }
			}
			FROM = { has_completed_focus = ARG_russian_manufacturers }
		}

		IF = {
			limit = {
				FROM = { original_tag = BRA }
			}
			FROM = { has_completed_focus = BRA_soviet_arms_industry }
		}
		IF = {
			limit = {
				FROM = { original_tag = AFG }
			}
			FROM = { has_completed_focus = AFG_truck_factory }
		}
	}

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_automobile_tool_plant
	# 	name = SOV_merge_materiel_plant_1_motorized
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_department_icon_motorized_mechanized_production
	# 	special_trait_background = yes

	# 	position = { x=@materiel_1_X y=@materiel_1_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 252 #GORKY
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 		#Only exists in this MIO
	# 	}

	# 	production_bonus = {
	# 		production_cost_factor = @motorized_production_cost_factor
	# 	}
	# }
	
	# add_trait = { 
	# 	token = SOV_mio_trait_merge_nkmz_plant
	# 	name = SOV_merge_materiel_plant_2
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_efficiency_cap
	# 	special_trait_background = yes

	# 	position = { x=@materiel_2_X y=@materiel_2_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 227 #STALINO
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_nkmz_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_efficiency_cap_factor = @materiel_production_efficiency_cap_factor
	# 	}
	# }

	# add_trait = { 
	# 	token = SOV_mio_trait_merge_magnitogorsk_metallurgical_plant
	# 	name = SOV_merge_materiel_plant_3
	# 	#icon = GFX_generic_mio_department_icon_facilities
	# 	icon = GFX_generic_mio_trait_icon_production_capacity
	# 	special_trait_background = yes

	# 	position = { x=@materiel_3_X y=@materiel_3_Y }
		
	# 	visible = {
	# 		FROM = { original_tag = SOV }
	# 	}

	# 	available = {
	# 		FROM = {
	# 			has_full_control_of_state = 582 #MAGNITOGORSK
	# 		}
	# 		FROM = {
	# 			has_completed_focus = SOV_merge_tank_and_materiel_plants
	# 		}
	# 	}

	# 	on_complete = {
	# 		custom_effect_tooltip = SOV_trait_will_not_be_available_in_other_organizations
	# 		FROM = {
	# 			set_country_flag = SOV_merge_magnitogorsk_metallurgical_plant_flag
	# 		}
	# 	}

	# 	production_bonus = {
	# 		production_capacity_factor = @materiel_production_capacity_factor
	# 	}
	# }
}

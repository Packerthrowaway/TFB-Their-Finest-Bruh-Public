focus_tree = {
	id = canadian_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = CAN
			has_dlc = "Together for Victory"
		}

		#modifier = {
		#	add = 10
		#	original_tag = CAN
		#	has_dlc = "Together for Victory"
		#}
	}
	
	default = no

	continuous_focus_position = { x = 20 y = 850 }

	shared_focus = COM_commonwealth_command

	focus = {
		id = CAN_modernize_industry
		icon = GFX_focus_generic_modernize_industry
		x = 5
		y = 0
		
		search_filters = { FOCUS_FILTER_RESEARCH }

		cost = 5

		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes


		completion_reward = {
			add_tech_bonus = {
				name = CAN_modernize_industry
				bonus = 0.5
				uses = 2
				category = industry
			}
		}
	}

	focus = {
		id = CAN_crown_corporations
		icon = GFX_goal_generic_construct_civ_factory
		x = 4
		y = 0
		relative_position_id = CAN_modernize_industry
		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		cost = 5

		ai_will_do = {
			factor = 15
		}

		available_if_capitulated = yes


		completion_reward = {
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = CAN_c_d_howe
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = ENG_women_prop
		}
	}

	focus = {
		id = CAN_if_day
		icon = GFX_goal_generic_consumer_goods
		x = -2
		y = 1
		relative_position_id = CAN_crown_corporations
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 5

		ai_will_do = {
			factor = 15
		}

		available = {
			threat > 0.15
		}
		
		prerequisite = {
			focus = CAN_modernize_industry
			focus = CAN_crown_corporations
		}

		available_if_capitulated = yes


		completion_reward = {
			add_ideas = CAN_war_bonds_2
		}
	}
		
	focus = {
		id = CAN_national_housing_act
		icon = GFX_focus_SWE_hygienic_housing
		x = 0
		y = 1
		relative_position_id = CAN_crown_corporations
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }

		ai_will_do = {
			factor = 3
		}
		
		prerequisite = {
			focus = CAN_crown_corporations
		}


		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CAN_national_housing_act_IC
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}

			IF = {
				limit = {
					has_country_leader = {
						ruling_only = yes
						character = CAN_mackenzie_king
					}
				}

				add_trait = {
					character = CAN_mackenzie_king
					trait = CAN_father_of_the_canadian_welfare_state
					ideology = liberalism 
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				set_state_flag = CAN_national_housing_act_IC
			}

			IF = {
				limit = {
					has_country_leader = {
						ruling_only = yes
						character = CAN_mackenzie_king
					}
				}
				
				add_trait = {
					character = CAN_mackenzie_king
					trait = CAN_father_of_the_canadian_welfare_state
					ideology = liberalism 
				}
				
			}
		}
	}

	focus = {
		id = CAN_wheat_board
		icon = GFX_focus_generic_farmland
		x = 0
		y = 1
		relative_position_id = CAN_if_day
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 5

		available = {
			threat > 0.2
		}

		ai_will_do = {
			factor = 15
		}
		
		prerequisite = {
			focus = CAN_if_day
		}
		
		available_if_capitulated = yes


		completion_reward = {
			swap_ideas = {
				remove_idea = CAN_great_depression_1
				add_idea = CAN_great_depression_2		
			}
		}
	}
		
	focus = {
		id = CAN_enlist_the_unemployed
		icon = GFX_focus_generic_manpower
		x = 0
		y = 1
		relative_position_id = CAN_national_housing_act
		search_filters = { FOCUS_FILTER_MANPOWER }

		cost = 5

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				OR = {
					has_war = yes
					threat > 0.25
				}
			}
		}
		
		prerequisite = {
			focus = CAN_national_housing_act
		}
		prerequisite = {
			#focus = CAN_if_day
		}

		available = {
			threat > 0.1
		}

		available_if_capitulated = yes


		completion_reward = {
			add_ideas = limited_conscription
			add_ideas = CAN_enlist_the_unemployed_idea
		}
	}
		
	focus = {
		id = CAN_war_fueled_economy
		icon = GFX_goal_generic_trade
		x = 1
		y = 1
		relative_position_id = CAN_enlist_the_unemployed
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 10
		}
		
		prerequisite = {
			focus = CAN_enlist_the_unemployed
		}
		prerequisite = {
			focus = CAN_women_in_the_workforce
		}

		available = {
			has_war = yes
		}

		available_if_capitulated = yes

		completion_reward = {
			remove_ideas = CAN_great_depression_2
			random_owned_controlled_state = {
				limit = {
					is_in_home_area = yes
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_war_fueled_economy_AF1
			}
			random_owned_controlled_state = {
				limit = {
					is_in_home_area = yes
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_war_fueled_economy_AF2
			}
			random_owned_controlled_state = {
				limit = {
					is_in_home_area = yes
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_war_fueled_economy_AF3
			}
		}
	}

	focus = {
		id = CAN_supply_the_empire
		icon = GFX_focus_generic_mineral_prospecting
		x = 0
		y = 1
		relative_position_id = CAN_war_fueled_economy
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 10
		}
		
		prerequisite = {
			focus = CAN_war_fueled_economy
		}
		prerequisite = {
			focus = CAN_aluminium_company_of_canada
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_supply_the_empire
				bonus = 0.75
				uses = 3
				technology = excavation1
				technology = excavation2
				technology = excavation3
				technology = excavation4
				technology = excavation5
			}
		}
	}

	focus = {
		id = CAN_send_in_the_zombies
		icon = GFX_focus_generic_manpower
		x = 2
		y = 1
		relative_position_id = CAN_war_fueled_economy
		search_filters = { FOCUS_FILTER_MANPOWER }

		cost = 5

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				OR = {
					has_war = yes
					threat > 0.25
				}
			}
		}
		
		prerequisite = {
			focus = CAN_war_fueled_economy
		}

		available = {
			
		}

		available_if_capitulated = yes


		completion_reward = {
			add_ideas = CAN_send_in_the_zombies
			unlock_decision_tooltip = CAN_military_concessions_to_french_canadians
		}
	}

		
	focus = {
		id = CAN_dollar_a_year_men
		icon = GFX_focus_generic_monetary_union
		x = -2
		y = 1
		relative_position_id = CAN_modernize_industry
		search_filters = { FOCUS_FILTER_POLITICAL }

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			#focus = CAN_crown_corporations
			focus = CAN_modernize_industry
		}

		available_if_capitulated = yes


		completion_reward = {
			add_political_power = 150
			add_ideas = CAN_dollar_a_year_men
		}
	}

	focus = {
		id = CAN_shadow_factories
		icon = GFX_SOV_narkom_for_arms_industry
		prerequisite = { focus = CAN_dollar_a_year_men }
		x = 0
		y = 1
		relative_position_id = CAN_dollar_a_year_men

		cost = 10

		ai_will_do = {
			factor = 35
		}

		available = {
			threat > 0.05
		}
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		continue_if_invalid = yes
		available_if_capitulated = yes

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_shadow_factories_AF1
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_shadow_factories_AF2
			}
			# random_owned_controlled_state = {
			# 	limit = {
			# 		free_building_slots = {
			# 			building = arms_factory
			# 			size > 1
			# 			include_locked = yes
			# 		}
			# 	}
			# 	add_extra_state_shared_building_slots = 2
			# 	add_building_construction = {
			# 		type = arms_factory
			# 		level = 2
			# 		instant_build = yes
			# 	}
			# 	set_state_flag = CAN_shadow_factories_AF3
			# }
		}
	}

	focus = {
		id = CAN_mine_the_shield
		icon = GFX_focus_generic_steel
		prerequisite = { focus = CAN_dollar_a_year_men }
		x = -4
		y = 1
		relative_position_id = CAN_dollar_a_year_men
		cost = 10

		ai_will_do = {
			factor = 24
		}

		available = {
			
		}
		
		bypass = {
			
		}

		
		
		available_if_capitulated = yes



		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 471 472 683 }
				limit = {
					is_in_home_area = yes
				}
				add_resource = {
					type = steel
					amount = 220
				}
			}
			random_owned_controlled_state = {
				prioritize = { 471 472 683 }
				limit = {
					is_in_home_area = yes
				}
				add_resource = {
					type = steel
					amount = 200
				}
			}
			random_owned_controlled_state = {
				prioritize = { 471 472 683 }
				limit = {
					is_in_home_area = yes
				}
				add_resource = {
					type = chromium
					amount = 180
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}	
	focus = {
		id = CAN_alberta_coal_towns
		icon = GFX_focus_generic_coal_mining
		prerequisite = { focus = CAN_mine_the_shield }
		relative_position_id = CAN_mine_the_shield
		x = 0
		y = 1		

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}					
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CAN_alberta_coal_towns_IC
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				add_resource = {
					type = coal
					amount = 80
				}	
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 470 }
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				add_resource = {
					type = coal
					amount = 80
				}	
				set_state_flag = CAN_alberta_coal_towns_IC
			}
		}
	}		
	focus = {
		id = CAN_canada_pacific_railway
		icon = GFX_focus_generic_railroad
		x = -2
		y = 1
		relative_position_id = CAN_dollar_a_year_men
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_dollar_a_year_men
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 0
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			473 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			471 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			build_railway = { #Vancouver - NW Canada
				path = {
					1408 1858 10273 4870 10548
				}
			}

			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = canadian_pacific_railway
		}
	}
		
	focus = {
		id = CAN_national_steel_car
		icon = GFX_focus_generic_industry_2
		x = 0
		y = 2
		relative_position_id = CAN_canada_pacific_railway
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_canada_pacific_railway
		}

		available = {
			
		}
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CAN_national_steel_car_IC1
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = CAN_national_steel_car_IC2
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_national_steel_car_IC1
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_national_steel_car_IC2
			}
		}
	}
		
	focus = {
		id = CAN_bank_of_canada
		icon = GFX_focus_mex_privatisation
		x = 2
		y = 1
		relative_position_id = CAN_dollar_a_year_men
		search_filters = { FOCUS_FILTER_POLITICAL }

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_dollar_a_year_men
		}

		available_if_capitulated = yes


		completion_reward = {
			add_political_power = 150
		}
	}
		
	focus = {
		id = CAN_maritime_colonial_railway
		icon = GFX_goal_generic_construct_infrastructure
		x = -1
		y = 1
		relative_position_id = CAN_bank_of_canada

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_bank_of_canada
		}

		available = {
			controls_state = 464
			controls_state = 465
			controls_state = 468
		}
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 0
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			464 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			465 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			468 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			466 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			build_railway = { #Montreal - Halifax
				path = {
					4345 4417 10320 7433 1284 12291 4362 7379 4432 1424 7304 7644 7361
				}
			}
			build_railway = {
				path = {
					1424 4285
				}
			} 
			build_railway = {
				path = { 7433 12149 }
			}
		}
	}
		
	focus = {
		id = CAN_aluminium_company_of_canada
		icon = GFX_focus_generic_aluminum
		x = 3
		y = 1
		relative_position_id = CAN_bank_of_canada

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_bank_of_canada
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			682 = {
				add_resource = {
					type = aluminium
					amount = 200
				}
			}
			466 = {
				add_resource = {
					type = aluminium
					amount = 100
				}
			}
			468 = {
				add_resource = {
					type = aluminium
					amount = 100
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY  }
	}
		
	focus = {
		id = CAN_imperial_oil
		icon = GFX_goal_generic_oil_refinery
		x = -2
		y = 1
		relative_position_id = CAN_aluminium_company_of_canada
		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_aluminium_company_of_canada
		}

		available = {
			controls_state = 470
			controls_state = 471
			controls_state = 472
			controls_state = 683
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			470 = {
				add_resource = {
					type = oil
					amount = 40
				}
			}
			471 = {
				add_resource = {
					type = oil
					amount = 60
				}
			}
			472 = {
				add_resource = {
					type = oil
					amount = 60
				}
			}
			683 = {
				add_resource = {
					type = oil
					amount = 60
				}
			}
		}
	}
		
	focus = {
		id = CAN_polymer_corporation
		icon = GFX_focus_generic_rubber
		x = 0
		y = 1
		relative_position_id = CAN_imperial_oil

		cost = 10

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				date < 1941.1.1
			}
		}
		
		prerequisite = {
			focus = CAN_imperial_oil
		}

		available = {
			
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = synth_oil_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = synthetic_refinery
						size < 0
						include_locked = yes
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

		completion_reward = {
			if = {
				limit = {
					NOT = { has_tech = synth_oil_experiments }
				}
				set_technology = { synth_oil_experiments = 1 }
			}
			if = {
				limit = {
					NOT = { has_tech = rubber_processing }
				}
				set_technology = { rubber_processing = 1 }
			}
			random_owned_controlled_state = {
				prioritize = { 682 }
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = synthetic_rubber_refinery
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_polymer_corporation_1
			}
			random_owned_controlled_state = {
				prioritize = { 276 }
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = synthetic_rubber_refinery
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_polymer_corporation_2
			}
			# random_owned_controlled_state = {
			# 	prioritize = { 276 }
			# 	limit = {
			# 		free_building_slots = {
			# 			building = industrial_complex
			# 			size > 1
			# 		}
			# 	}
			# 	add_extra_state_shared_building_slots = 2
			# 	add_building_construction = {
			# 		type = synthetic_rubber_refinery
			# 		level = 2
			# 		instant_build = yes
			# 	}
			# 	set_state_flag = CAN_polymer_corporation_2
			# }
		}
	}
		
	focus = {
		id = CAN_uranium_mining
		icon = GFX_focus_generic_uranium_extraction
		x = 0
		y = 1
		relative_position_id = CAN_aluminium_company_of_canada
		search_filters = { FOCUS_FILTER_RESEARCH }

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_aluminium_company_of_canada
		}

		available = {
			date > 1940.1.1
		}

		available_if_capitulated = yes


		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_tech = atomic_research
					}
				}
				add_tech_bonus = {
					name = CAN_uranium_mining
					bonus = 0.5
					uses = 1
					category = nuclear
				}
				add_breakthrough_progress = {
					specialization = specialization_nuclear
					value = 0.25
				}
			}
			else = {
				add_breakthrough_progress = {
					specialization = specialization_nuclear
					value = 0.75
				}
			}
		}
	}	
		
	focus = {
		id = CAN_john_inglis_and_company
		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 1
		relative_position_id = CAN_canada_pacific_railway
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_canada_pacific_railway
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CAN_john_inglis_and_company_AF1
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = CAN_john_inglis_and_company_AF2
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 276 682 }
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_john_inglis_and_company_AF1
			}
			random_owned_controlled_state = {
				prioritize = { 276 682 }
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_john_inglis_and_company_AF2
			}
		}
	}
		
	focus = {
		id = CAN_fund_the_national_research_council
		icon = GFX_focus_research
		x = 1
		y = 1
		relative_position_id = CAN_john_inglis_and_company
		search_filters = { FOCUS_FILTER_RESEARCH }

		cost = 10

		ai_will_do = {
			factor = 15
		}
		
		prerequisite = {
			focus = CAN_john_inglis_and_company
		}
		
		prerequisite = {
			focus = CAN_maritime_colonial_railway
		}


		available_if_capitulated = yes


		completion_reward = {
			add_research_slot = 1
		}
	}

	# war prep
		
	focus = {
		id = CAN_defence_of_canada_regulations
		icon = GFX_goal_generic_construct_military
		x = 4
		y = 0
		dynamic = yes
		
		search_filters = { FOCUS_FILTER_POLITICAL }

		cost = 5

		ai_will_do = {
			factor = 2
		}
		relative_position_id = CAN_crown_corporations
		prerequisite = {
			
		}

		available = {
			threat > 0.25
		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		completion_reward = {
			add_war_support = 0.05
			if = {
				limit = { has_government = democratic }
				add_ideas = CAN_defence_of_canada_regulations_democratic
			}
			if = {
				limit = { has_government = communism }
				add_ideas = CAN_defence_of_canada_regulations_communism
			}
			if = {
				limit = { has_government = fascism }
				add_ideas = CAN_defence_of_canada_regulations_fascism
			}				
		}
	}
		
	focus = {
		id = CAN_wartime_prices_and_trade_board
		icon = GFX_focus_generic_price_controls
		x = -1
		y = 1
		relative_position_id = CAN_defence_of_canada_regulations

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_defence_of_canada_regulations
		}

		available = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			add_ideas = CAN_wartime_prices_and_trade_board
		}
	}
		
	focus = {
		id = CAN_women_in_the_workforce
		icon = GFX_focus_AUS_courting_the_princess_of_industry
		x = -1
		y = 1
		
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 5

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_wartime_prices_and_trade_board
		}
		relative_position_id = CAN_wartime_prices_and_trade_board
		available = {
			
		}
		
		bypass = {
			
		}

		available_if_capitulated = yes


		completion_reward = {
			add_ideas = CAN_women_in_the_workforce
		}
	}
		
	focus = {
		id = CAN_solve_the_conscription_crisis
		icon = GFX_goal_tfv_can_forced_quebec_conscription
		x = 1
		y = 1
		
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }

		cost = 2

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 30
				has_manpower < 20000
			}
		}
		
		prerequisite = {
			focus = CAN_wartime_prices_and_trade_board
		}
		relative_position_id = CAN_wartime_prices_and_trade_board

		available = {
			
		}
		
		bypass = {
			NOT = {
				controls_state = 468
				controls_state = 862
				controls_state = 863
				controls_state = 860
				controls_state = 861
				controls_state = 466
			}
		}

		available_if_capitulated = no


		completion_reward = {
			unlock_decision_tooltip = CAN_political_concessions_to_french_canadians
			unlock_decision_tooltip = CAN_industrial_concessions_to_french_canadians
		}
	}
		
	focus = {
		id = CAN_national_resources_mobilization_act
		icon = GFX_goal_generic_demand_territory
		x = 1
		y = 1
		relative_position_id = CAN_defence_of_canada_regulations

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_defence_of_canada_regulations
		}

		available = {
		}
		


		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }

		completion_reward = {
			add_ideas = CAN_national_resources_mobilization_act
		}
	}
		
	focus = {
		id = CAN_department_of_munitions_and_supply
		icon = GFX_goal_ammunitions
		x = 3
		y = 1
		relative_position_id = CAN_wartime_prices_and_trade_board
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_wartime_prices_and_trade_board
		}

		available = {
		}
		


		available_if_capitulated = yes

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}					
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CAN_department_of_munitions_and_supply_AF1
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = CAN_department_of_munitions_and_supply_AF2
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_department_of_munitions_and_supply_AF1
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_department_of_munitions_and_supply_AF2
			}
		}
	}
		
	focus = {
		id = CAN_bits_and_pieces_program
		icon = GFX_goal_generic_construct_mil_factory
		x = 0
		y = 1
		relative_position_id = CAN_department_of_munitions_and_supply
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cost = 10

		ai_will_do = {
			factor = 6
		}
		
		prerequisite = {
			focus = CAN_department_of_munitions_and_supply
		}

		available = {
		}
		


		available_if_capitulated = yes


		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			add_ideas = CAN_bits_and_pieces_program
		}
	}

	focus = {
		id = CAN_lend_lease_economy
		icon = GFX_goal_generic_military_sphere

		cost = 5
		x = 0
		y = 1
		relative_position_id = CAN_bits_and_pieces_program

		prerequisite = {
			focus = CAN_war_fueled_economy
		}

		prerequisite = {
			focus = CAN_bits_and_pieces_program
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {

		}

		completion_reward = {
			swap_ideas = {
				add_idea = CAN_bits_and_pieces_program_1
				remove_idea = CAN_bits_and_pieces_program
			}
		}
	}

	# army branch

	focus = {
		id = CAN_army_modernization
		icon = GFX_goal_generic_army_doctrines
		relative_position_id = CAN_defence_of_canada_regulations
		x = 9
		y = 0

		cost = 10

		ai_will_do = {
			factor = 4
		}

		available = {
			
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			army_experience = 20
			add_doctrine_cost_reduction = {
				name = CAN_army_modernization
				cost_reduction = 0.40
				uses = 1
				category = land_doctrine
			}
		}
	}

	focus = {
		id = CAN_canadian_infantry_corps
		icon = GFX_goal_generic_allies_build_infantry
		prerequisite = { focus = CAN_army_modernization }
		x = 1
		y = 1
		relative_position_id = CAN_army_modernization

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			if = {
				limit = {
					is_ai = no
				}
		
			hidden_effect = {
				load_oob = "CAN_1_infantry_Division"		# template
			}
			}
			add_tech_bonus = {
				name = CAN_canadian_infantry_corps
				bonus = 0.5
				uses = 2
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = CAN_royal_regiment_of_canadian_artillery
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = CAN_army_modernization }
		x = -1
		y = 1
		relative_position_id = CAN_army_modernization

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.15
			}
			add_tech_bonus = {
				name = CAN_royal_regiment_of_canadian_artillery
				bonus = 0.5
				uses = 2
				category = artillery
			}
		}
	}

	focus = {
		id = CAN_the_walkie_talkie
		icon = GFX_goal_generic_radar
		prerequisite = { focus = CAN_canadian_infantry_corps }
		x = 1
		y = 2
		relative_position_id = CAN_army_modernization 

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_the_walkie_talkie
				bonus = 0.5
				uses = 1
				technology = tech_signal_company
				technology = tech_signal_company2
				technology = tech_signal_company3
				technology = tech_signal_company4
				technology = inf_radio1
				technology = inf_radio2
				technology = inf_radio3
				technology = art_radio1
				technology = art_radio2
				technology = art_radio3
				technology = mot_radio1
				technology = mot_radio2
				technology = mot_radio3
			
			}
		}
	}

	focus = {
		id = CAN_rcmp_security_service
		icon = GFX_focus_generic_secret_service_agency
		prerequisite = { focus = CAN_the_walkie_talkie }
		x = 1
		y = 1
		relative_position_id = CAN_the_walkie_talkie

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes				
			}
			add_ideas = CAN_rcmp_security_service
		}
	}

	focus = {
		id = CAN_a_motorized_army
		icon = GFX_focus_generic_truck
		prerequisite = { focus = CAN_royal_regiment_of_canadian_artillery }
		x = 0
		y = 1
		relative_position_id = CAN_royal_regiment_of_canadian_artillery 

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_a_motorized_army
				bonus = 0.5
				uses = 2
				category = motorized_equipment
				category = support_tech
			}
		}
	}

	focus = {
		id = CAN_ford_general_motors
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = CAN_a_motorized_army }
		
		cost = 10
		x = -1
		y = 1
		relative_position_id = CAN_a_motorized_army	

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {

		}

		completion_reward = {
			add_ideas = CAN_ford_general_motors
			unlock_military_industrial_organization_tooltip = mio:USA_ford_motor_company_organization
			CAN_copy_ford_MIO_effects = yes
		}
	}

	focus = {
		id = CAN_red_deer_training_camp
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = CAN_a_motorized_army focus = CAN_the_walkie_talkie }
		x = 1
		y = 1
		relative_position_id = CAN_a_motorized_army 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			threat > 0.05
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			army_experience = 15
			add_doctrine_cost_reduction = {
				name = CAN_red_deer_training_camp
				cost_reduction = 0.40
				uses = 1
				category = land_doctrine
			}
			add_mastery_bonus = {
				name = CAN_red_deer_training_camp
				bonus = 0.2
				days = 360
				folder = land
			}
			add_mastery = {
				amount = 25
				folder = land
			}
		}
	}

	focus = {
		id = CAN_over_the_edge
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = CAN_red_deer_training_camp }
		mutually_exclusive = { focus = CAN_steel_not_blood }
		x = -2
		y = 1
		relative_position_id = CAN_red_deer_training_camp 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			has_war = yes
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			army_experience = 30
			add_mastery_bonus = {
				name = CAN_over_the_edge
				bonus = 0.2
				days = 360
				track = infantry
			}
			add_mastery = {
				amount = 25
				track = infantry
			}
			add_tech_bonus = {
				name = CAN_over_the_edge
				bonus = 0.40
				uses = 1
				category = para_tech
				category = marine_tech
				category = mountaineers_tech
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = CAN_long_branch_arsenal
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = CAN_over_the_edge }
		x = 0
		y = 1
		relative_position_id = CAN_over_the_edge

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_long_branch_arsenal
			random_owned_controlled_state = {
				prioritize = { 285 517 }
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
			
		}
	}

	focus = {
		id = CAN_infantry_tank_destroyer_development
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = CAN_long_branch_arsenal }
		x = 0
		y = 1
		relative_position_id = CAN_long_branch_arsenal 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = tank_hunter_teams
		}
	}


	focus = {
		id = CAN_special_forces_of_canada
		icon = GFX_focus_eng_special_air_service
		prerequisite = { focus = CAN_over_the_edge }
		x = -4
		y = 1
		relative_position_id = CAN_over_the_edge 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_special_forces_of_canada
		}
	}

	focus = {
		id = CAN_1st_canadian_parachute_battalion
		icon = GFX_focus_generic_paratrooper 
		prerequisite = { focus = CAN_special_forces_of_canada }
		x = 0
		y = 1
		relative_position_id = CAN_special_forces_of_canada 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_1st_canadian_parachute_battalion
			add_tech_bonus = {
				name = CAN_1st_canadian_parachute_battalion
				bonus = 0.75
				uses = 2
				category = para_tech
			}
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 2
					category = special_forces_doctrine
				}
			}
		}
	}

	focus = {
		id = CAN_commandos
		icon = GFX_SOV_naval_infantry_ccp_2d_sov_compatibility
		prerequisite = { focus = CAN_1st_canadian_parachute_battalion }
		x = 0
		y = 1
		relative_position_id = CAN_1st_canadian_parachute_battalion 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			OR = {
				has_tech = marines3
				ENG = { has_completed_focus = ENG_commandos }
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			CAN_guy_simonds = {
				add_trait = {
					trait = commando
				}
				add_trait = {
					trait = naval_invader
				}
			}
			hidden_effect = {
				set_technology = {
					commandos = 1
				}
			}
			custom_effect_tooltip = ENG_commandos_tt
		}
	}


	focus = {
		id = CAN_arms_purchases_USA
		icon = GFX_focus_generic_american_investments
		prerequisite = { focus = CAN_over_the_edge }
		x = -2
		y = 1
		relative_position_id = CAN_over_the_edge 

		cost = 10

		available = {
			country_exists = USA
			USA = {
				OR = {
					NOT = { has_completed_focus = USA_neutrality_act }
					has_completed_focus = USA_lend_lease_act
				}
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			set_country_flag = FRA_arms_purchases_permitted
			unlock_decision_category_tooltip = FRA_weapons_purchases_category
		}
	}

	focus = {
		id = CAN_the_black_devils
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = CAN_arms_purchases_USA }
		x = 0
		y = 1
		relative_position_id = CAN_arms_purchases_USA 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			is_in_faction_with = USA
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_the_black_devils
			custom_effect_tooltip = CAN_special_forces_org_tt

			hidden_effect = {
				set_technology = {
					CAN_org_special_forces_buff_tech = 1
					popup = no
				}
			}

		}
	}

	focus = {
		id = CAN_steel_not_blood
		icon = GFX_doctrine_tank_warfare
		prerequisite = { focus = CAN_red_deer_training_camp }
		mutually_exclusive = { focus = CAN_over_the_edge }
		x = 2
		y = 1
		relative_position_id = CAN_red_deer_training_camp 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			has_war = yes
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			army_experience = 30
			# add_doctrine_cost_reduction = {
			# 	name = CAN_steel_not_blood
			# 	cost_reduction = 0.40
			# 	uses = 1
			# 	category = land_doctrine
			# }
			add_mastery_bonus = {
				name = CAN_steel_not_blood
				bonus = 0.2
				days = 360
				track = armor
			}
			add_mastery = {
				amount = 25
				track = armor
			}
			add_tech_bonus = {
				name = CAN_steel_not_blood
				bonus = 0.5
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = CAN_cmp_truck
		icon = GFX_focus_generic_mechanized
		x = -2
		y = 1
		relative_position_id = CAN_steel_not_blood

		cost = 10

		ai_will_do = {
			factor = 25
		}

		prerequisite = {
			focus = CAN_over_the_edge
			focus = CAN_steel_not_blood
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_cmp_truck
				ahead_reduction = 0.5
				bonus = 0.75
				uses = 1
				category = cat_mechanized_equipment
			}
		}
	}

	focus = {
		id = CAN_the_harry_hopkins
		icon = GFX_focus_generic_tankette
		prerequisite = { focus = CAN_cmp_truck }
		x = 0
		y = 1
		relative_position_id = CAN_cmp_truck

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_the_harry_hopkins
				ahead_reduction = 0.5
				bonus = 0.75
				uses = 1
				technology = eng_light_tank_3
			}
		}
	}

	focus = {
		id = CAN_retool_angus_shops
		icon = GFX_focus_generic_tank_assembly
		x = 0
		y = 1
		relative_position_id = CAN_steel_not_blood

		cost = 10

		ai_will_do = {
			factor = 5
		}
		
		prerequisite = {
			focus = CAN_steel_not_blood
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}					
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			add_ideas = CAN_retool_angus_shops
			random_owned_controlled_state = {
				prioritize = { 285 517 }
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
				set_state_flag = CAN_retool_angus_shops_AF
			}
		}
	}

	focus = {
		id = CAN_sexton
		icon = GFX_focus_generic_tank_assault
		
		cost = 10
		x = 0
		y = 1
		relative_position_id = CAN_retool_angus_shops

		prerequisite = {
			focus = CAN_retool_angus_shops
		}

		prerequisite = {
			focus = CAN_the_crusader_tank
			focus = CAN_the_valentine_tank
		}

		available = {
			OR = {
				date > 1942.1.1
				AND = {
					is_in_faction_with = USA
					USA = {
						has_war = yes
					}
				}
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {

		}

		completion_reward = {
			swap_ideas = {
				add_idea = CAN_sexton
				remove_idea = CAN_retool_angus_shops
			}
		}
	}

	focus = {
		id = CAN_the_valentine_tank
		icon = GFX_doctrine_tank_warfare
		prerequisite = { focus = CAN_steel_not_blood }
		x = 4
		y = 1
		relative_position_id = CAN_steel_not_blood 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		mutually_exclusive = {
			focus = CAN_the_crusader_tank
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_the_valentine_tank
				bonus = 0.50
				uses = 2
				#ahead_reduction = 0.5
				category = cat_heavy_armor
			}
		}
	}

	focus = {
		id = CAN_advanced_infantry_tanks
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = CAN_the_valentine_tank }
		
		cost = 10
		x = 0
		y = 1
		relative_position_id = CAN_the_valentine_tank

		available = {
			has_war = yes
			has_tech = eng_heavy_tank_3
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {

		}

		completion_reward = {
			add_tech_bonus = {
				name = CAN_advanced_infantry_tanks
				bonus = 0.75
				ahead_reduction = 0.5
				uses = 1
				technology = eng_heavy_tank_5
			}
		}
	}

	focus = {
		id = CAN_the_crusader_tank
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = CAN_steel_not_blood }
		x = 2
		y = 1
		relative_position_id = CAN_steel_not_blood 

		cost = 10

		ai_will_do = {
			factor = 25
		}

		mutually_exclusive = {
			focus = CAN_the_valentine_tank
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {

			# add_breakthrough_progress = {
			# 	specialization = specialization_land
			# 	value = 0.5
			# }

			add_tech_bonus = {
				name = CAN_the_crusader_tank
				bonus = 0.75
				uses = 2
				category = cat_medium_armor
			}
		}
	}

	focus = {
		id = CAN_the_cromwell_tank
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = CAN_the_crusader_tank }
		x = 0
		y = 1
		relative_position_id = CAN_the_crusader_tank

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			has_war = yes
			has_tech = eng_medium_tank_4
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {

			# add_breakthrough_progress = {
			# 	specialization = specialization_land
			# 	value = 0.5
			# }

			add_tech_bonus = {
				name = CAN_the_cromwell_tank
				bonus = 0.75
				ahead_reduction = 0.5
				uses = 1
				technology = eng_medium_tank_5
			}
		}
	}

	# air branch

	focus = {
		id = CAN_seperate_army_and_air_force
		icon = GFX_goal_generic_build_airforce
		relative_position_id = CAN_defence_of_canada_regulations
		x = 15
		y = 0

		cost = 5

		ai_will_do = {
			factor = 3
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		complete_tooltip = {
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = CAN_seperate_army_and_air_force
				cost_reduction = 0.25
				uses = 2
				category = air_doctrine
			}
		}

		completion_reward = {
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = CAN_seperate_army_and_air_force
				cost_reduction = 0.25
				uses = 2
				category = air_doctrine
			}
		}
	}

	focus = {
		id = CAN_we_have_the_hurricane
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = CAN_seperate_army_and_air_force }
		x = -1
		y = 1
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_we_have_the_hurricane
				bonus = 0.5
				uses = 2
				category = light_fighter
			}
		}
	}

	focus = {
		id = CAN_the_pacific_coast_air_defence_radar_system
		icon = GFX_goal_generic_radar
		prerequisite = { focus = CAN_seperate_army_and_air_force }
		x = 1
		y = 1
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {
			has_tech = radio
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		complete_tooltip = {

			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.25
			}

			add_tech_bonus = {
				name = CAN_the_pacific_coast_air_defence_radar_system
				bonus = 0.75
				uses = 1
				category = radar_tech
			}
			random_state = {
				limit = {
					has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar3
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {

			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.25
			}

			add_tech_bonus = {
				name = CAN_the_pacific_coast_air_defence_radar_system
				bonus = 0.75
				uses = 1
				category = radar_tech
			}

			if = {
				limit = { has_tech = radio_detection }
				random_owned_controlled_state = {
					prioritize = { 473 }
					limit = {
						is_in_home_area = yes
						free_building_slots = {
							building = radar_station
							size > 0
						}
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
				}

				random_owned_controlled_state = {
					limit = {
						NOT = { has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1 }
						is_in_home_area = yes
						free_building_slots = {
							building = radar_station
							size > 0
						}
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
				}

				random_owned_controlled_state = {
					limit = {
						NOT = { has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1 }
						NOT = { has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2 }
						is_in_home_area = yes
						free_building_slots = {
							building = radar_station
							size > 0
						}
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar3
				}
				else = {
					complete_special_project = {
						project = sp:sp_air_radar
					}
					effect_tooltip = {
						random_owned_controlled_state = {
							prioritize = { 473 }
							limit = {
								is_in_home_area = yes
							}
							add_building_construction = {
								type = radar_station
								level = 1
								instant_build = yes
							}
						}

						random_owned_controlled_state = {
							limit = {
								NOT = { state = 473 }
								NOT = { has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1 }
								is_in_home_area = yes
							}
							add_building_construction = {
								type = radar_station
								level = 1
								instant_build = yes
							}
						}
					}
					random_owned_controlled_state = {
						prioritize = { 473 }
						limit = {
							is_in_home_area = yes
							free_building_slots = {
								building = radar_station
								size > 0
							}
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
						set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
					}

					random_owned_controlled_state = {
						limit = {
							NOT = { has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1 }
							is_in_home_area = yes
							free_building_slots = {
								building = radar_station
								size > 0
							}
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
						set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
					}
				}
			}
		}
	}

	focus = {
		id = CAN_commonwealth_air_training_plan
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = CAN_the_pacific_coast_air_defence_radar_system focus = CAN_we_have_the_hurricane }
		x = 0
		y = 2
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 5

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		complete_tooltip = {
			air_experience = 25
			random_state = {
				limit = {
					has_state_flag = CAN_commonwealth_air_training_plan_AB
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			add_doctrine_cost_reduction = {
				name = CAN_commonwealth_air_training_plan
				cost_reduction = 0.25
				uses = 2
				category = air_doctrine
			}
			add_mastery_bonus = {
				name = CAN_commonwealth_air_training_plan
				bonus = 0.2
				days = 360
				folder = air
			}
			add_mastery = {
				amount = 25
				folder = air
			}
		}

		completion_reward = {
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = CAN_commonwealth_air_training_plan
				cost_reduction = 0.25
				uses = 2
				category = air_doctrine
			}
		}
	}

	focus = {
		id = CAN_the_plan
		icon = GFX_goal_generic_air_fighter2
		prerequisite = { focus = CAN_commonwealth_air_training_plan }
		x = 3
		y = 1
		relative_position_id = CAN_commonwealth_air_training_plan

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CAN_the_plan
		}
	}

	focus = {
		id = CAN_carrier_aircraft
		icon = GFX_goal_generic_air_naval_bomber
		x = 2
		y = 1
		relative_position_id = CAN_the_plan

		cost = 5

		ai_will_do = {
			factor = 2
		}

		prerequisite = {
			focus = CAN_the_plan
			focus = CAN_carrier_primacy
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_tech_bonus = {
				bonus = 0.5
				uses = 2
				category = naval_air
			}

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CAN_handley_page_organization
				mio:CAN_fairchild_aircraft_ltd_organization = {
					add_mio_size = 1
					add_mio_funds = 500

				#	unlock_mio_trait_tooltip  = {
				#		department = CAN_mio_department_design_plane_heavy_combat
				#		trait = CAN_mio_trait_cookie_carriers
				#	}
				}
			}

			else = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CAN_fairchild_aircraft_ltd
			}
		}
	}

	focus = {
		id = CAN_rcaf_station_borden
		icon = GFX_focus_generic_air_bases
		prerequisite = { focus = CAN_the_plan }
		x = 0
		y = 1
		relative_position_id = CAN_the_plan

		cost = 5

		ai_will_do = {
			factor = 2
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					air_base > 0
					free_building_slots = {
						building = air_base
						size > 3
					}
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 464 }
				limit = {
					air_base > 0
					free_building_slots = {
						building = air_base
						size > 3
					}
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = CAN_fund_fairchilds_development
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = CAN_commonwealth_air_training_plan }
		x = -1
		y = 3
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 5

		ai_will_do = {
			factor = 25
			modifier = {
				factor = 2
				has_completed_focus = CAN_cookie_carriers
			}
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_fund_fairchilds_development
				bonus = 0.5
				uses = 2
				category = tactical_bomber
				category = cas_bomber
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			#IF = {
			#	limit = {
			#		has_dlc = "Arms Against Tyranny"
			#	}
			#	custom_effect_tooltip = available_mio_tt
			#	show_mio_tooltip = CAN_fairchild_aircraft_ltd_organization
			#	mio:CAN_fairchild_aircraft_ltd_organization = {
			#		add_mio_funds = 2500
			#	}
			#}

			#else = {
			#	custom_effect_tooltip = available_designer
			#	show_ideas_tooltip = CAN_fairchild_aircraft_ltd
			#}
		}
	}

	focus = {
		id = CAN_cookie_carriers
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = CAN_commonwealth_air_training_plan }
		x = 1
		y = 3
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 5

		ai_will_do = {
			factor = 25
			modifier = {
				factor = 2
				has_completed_focus = CAN_fund_fairchilds_development
			}
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_cookie_carriers
				bonus = 0.75
				uses = 1
				category = cat_strategic_bomber
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CAN_handley_page_organization
				mio:CAN_handley_page_organization = {
					add_mio_size = 1
					add_mio_funds = 500

				#	unlock_mio_trait_tooltip  = {
				#		department = CAN_mio_department_design_plane_heavy_combat
				#		trait = CAN_mio_trait_cookie_carriers
				#	}
				}
			}

			else = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CAN_handley_page
			}
		}
	}

	focus = {
		id = CAN_the_sabre_project
		icon = GFX_focus_rocketry
		prerequisite = { focus = CAN_cookie_carriers }
		prerequisite = { focus = CAN_fund_fairchilds_development }
		x = 0
		y = 4
		relative_position_id = CAN_seperate_army_and_air_force

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {

			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}

			add_tech_bonus = {
				name = CAN_the_sabre_project
				ahead_reduction = 1
				uses = 1
				category = rocketry
				category = jet_technology
			}

		}
	}

	# navy tree

	focus = {
		id = CAN_halifax_shipyards
		icon = GFX_goal_generic_construct_naval_dockyard

		cost = 5
		x = 10
		y = 0
		relative_position_id = CAN_seperate_army_and_air_force

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			navy_experience = 50
			random_state = {
				limit = {
					has_state_flag = CAN_halifax_shipyards_DY
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 50
			random_owned_controlled_state = {
				prioritize = { 464 }
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
				set_state_flag = CAN_halifax_shipyards_DY
			}
		}
	}

	focus = {
		id = CAN_winning_the_battle_of_the_alantic
		icon = GFX_goal_generic_navy_doctrines_tactics

		cost = 5
		x = 3
		y = 1
		relative_position_id = CAN_halifax_shipyards

		prerequisite = {
			focus = CAN_halifax_shipyards
		}

		mutually_exclusive = {
			focus = CAN_bring_the_fight
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 25
			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.15
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			custom_effect_tooltip = CAN_custom_escort_bonus
			custom_effect_tooltip = generic_skip_one_line_tt
			if = {
				limit = {
					has_doctrine = convoy_escort
				}
				add_mastery_bonus = {
					name = CAN_escort_fleet
					bonus = 0.2
					days = 360
					sub_doctrine = convoy_escort
				}
				add_mastery = {
					amount = 100
					sub_doctrine = convoy_escort
				}
			}
			else = {
				add_mastery_bonus = {
					name = CAN_escort_fleet
					bonus = 0.1
					days = 180
					track = screens
				}
				add_mastery = {
					amount = 50
					track = screens
				}
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			add_doctrine_cost_reduction = {
				name = CAN_escort_fleet
				cost_reduction = 0.25
				uses = 2
				category = naval_doctrine
			}
		}
	}

	focus = {
		id = CAN_modern_sonar
		icon = GFX_goal_generic_navy_anti_submarine

		cost = 5
		x = 1
		y = 1
		relative_position_id = CAN_winning_the_battle_of_the_alantic

		prerequisite = {
			focus = CAN_winning_the_battle_of_the_alantic
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_modern_sonar
				bonus = 0.5
				uses = 3
				category = asw_tech
			}
		}
	}

	focus = {
		id = CAN_watu_focus
		icon = GFX_goal_generic_occupy_states_coastal

		cost = 5
		x = 1
		y = 1
		relative_position_id = CAN_modern_sonar

		prerequisite = {
			focus = CAN_modern_sonar
		}

		available = {
			OR = {
				has_tech = advanced_depth_charges
				ENG = {
					has_completed_focus = ENG_form_watu
				}
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = {  }

		completion_reward = {
			add_ideas = ENG_watu_idea
			add_mastery_bonus = {
				name = ENG_anti_submarine_training_school
				bonus = 0.25
				days = 180
				track = screens
			}
		}
	}

	focus = {
		id = CAN_rapid_response_ships
		icon = GFX_goal_generic_navy_cruiser

		cost = 5
		x = 0
		y = 2
		relative_position_id = CAN_modern_sonar

		prerequisite = {
			focus = CAN_modern_sonar
		}

		prerequisite = {
			focus = CAN_watu_focus
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = {  }

		completion_reward = {
			swap_ideas = {
				add_idea = CAN_watu_idea
				remove_idea = ENG_watu_idea
			}
		}
	}

	focus = {
		id = CAN_transfer_old_british_ships
		icon = GFX_focus_chi_british_cooperation

		cost = 5
		x = -1
		y = 1
		relative_position_id = CAN_winning_the_battle_of_the_alantic

		prerequisite = {
			focus = CAN_winning_the_battle_of_the_alantic
			focus = CAN_bring_the_fight
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { }

		completion_reward = {
			custom_effect_tooltip = CAN_get_6_british_ships
			hidden_effect = {
				create_equipment_variant = {
					name = "A Class"
					type = ship_hull_light_1
					name_group = CAN_DD_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_2
						fixed_ship_anti_air_slot = empty
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						mid_1_custom_slot = ship_torpedo_1
						rear_1_custom_slot = empty
					}
				}
				load_oob = "CAN_transfer_old_british_ships" # 6 early destroyers
			}
		}
	}

	focus = {
		id = CAN_modern_screen_ships
		icon = GFX_focus_generic_cruiser2

		cost = 5
		x = 0
		y = 1
		relative_position_id = CAN_transfer_old_british_ships

		prerequisite = {
			focus = CAN_transfer_old_british_ships
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_destroyer_effort
				bonus = 0.5
				uses = 2
				category = dd_tech
				category = ca_tech
			}
		}
	}

	focus = {
		id = CAN_bring_the_fight
		icon = GFX_focus_generic_large_navy

		cost = 5
		x = -3
		y = 1
		relative_position_id = CAN_halifax_shipyards

		prerequisite = {
			focus = CAN_halifax_shipyards
		}

		mutually_exclusive = {
			focus = CAN_winning_the_battle_of_the_alantic
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 25
			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.15
			}
			add_mastery_bonus = {
				name = CAN_fleet_in_being
				bonus = 0.2
				days = 180
				grand_doctrine = new_fleet_in_being
			}
			add_doctrine_cost_reduction = {
				name = CAN_fleet_in_being
				cost_reduction = 0.25
				uses = 2
				category = naval_doctrine
			}
		}
	}

	focus = {
		id = CAN_thick_armor
		icon = GFX_focus_generic_coastal_fort

		cost = 5
		x = -2
		y = 1
		relative_position_id = CAN_bring_the_fight

		prerequisite = {
			focus = CAN_bring_the_fight
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CAN_thick_armor
				bonus = 0.25
				uses = 2
				category = naval_armor
			}
			add_ideas = CAN_thick_armor
		}
	}

	focus = {
		id = CAN_heavy_strike_tactics
		icon = GFX_focus_ARG_study_the_battle_of_the_river_plate

		cost = 5
		x = 0
		y = 1
		relative_position_id = CAN_thick_armor

		prerequisite = {
			focus = CAN_thick_armor
		}

		available = {
			OR = {
				has_completed_focus = CAN_battleship_primacy
				has_completed_focus = CAN_carrier_primacy
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { }

		completion_reward = {
			if = {
				limit = {
					has_completed_focus = CAN_battleship_primacy
				}
				swap_ideas = {
					add_idea = CAN_heavy_strike_tactics_battleship
					remove_idea = CAN_thick_armor
				}
			}
			else_if = {
				limit = {
					has_completed_focus = CAN_carrier_primacy
				}
				swap_ideas = {
					add_idea = CAN_heavy_strike_tactics_carrier
					remove_idea = CAN_thick_armor
				}
			}
			else = {
				effect_tooltip = {
					custom_effect_tooltip = CAN_if_we_focused_on_battleships
					swap_ideas = {
						add_idea = CAN_heavy_strike_tactics_battleship
						remove_idea = CAN_thick_armor
					}
					#custom_effect_tooltip = generic_skip_one_line_tt
					custom_effect_tooltip = CAN_if_we_focused_on_carriers
					swap_ideas = {
						add_idea = CAN_heavy_strike_tactics_carrier
						remove_idea = CAN_thick_armor
					}
				}
			}
		}
	}

	focus = {
		id = CAN_united_shipyards
		icon = GFX_focus_POL_develop_polish_shipbuilding

		cost = 5
		x = 3
		y = 1
		relative_position_id = CAN_bring_the_fight

		prerequisite = {
			focus = CAN_bring_the_fight
			focus = CAN_winning_the_battle_of_the_alantic
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		complete_tooltip = {
			navy_experience = 50
			random_state = {
				limit = {
					has_state_flag = CAN_united_shipyards_DY
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 50
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
				set_state_flag = CAN_united_shipyards_DY
			}
		}
	}

	focus = {
		id = CAN_battleship_primacy
		icon = GFX_focus_generic_navy_battleship2

		cost = 10
		x = 2
		y = 2
		relative_position_id = CAN_bring_the_fight

		prerequisite = {
			focus = CAN_bring_the_fight
		}

		mutually_exclusive = {
			focus = CAN_carrier_primacy
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_battleship_primacy
			add_tech_bonus = {
				name = cv_bonus
				bonus = 0.5
				ahead_reduction = 0.25
				uses = 1
				category = bb_tech
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = ENG_cammell_laird_organization
				mio:ENG_cammell_laird_organization = {
					add_mio_size = 1
					add_mio_funds = 500

				#	unlock_mio_trait_tooltip  = {
				#		department = CAN_mio_department_design_plane_heavy_combat
				#		trait = CAN_mio_trait_cookie_carriers
				#	}
				}
			}
		}
	}

	focus = {
		id = CAN_carrier_primacy
		icon = GFX_goal_generic_navy_carrier

		cost = 10
		x = 0
		y = 2
		relative_position_id = CAN_bring_the_fight

		prerequisite = {
			focus = CAN_bring_the_fight
		}

		mutually_exclusive = {
			focus = CAN_battleship_primacy
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CAN_carrier_primacy
			add_tech_bonus = {
				name = cv_bonus
				bonus = 0.5
				ahead_reduction = 0.25
				uses = 1
				category = cv_tech
			}

			custom_effect_tooltip = generic_skip_one_line_tt 

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CAN_kingston_shipbuilding_organization
				mio:CAN_kingston_shipbuilding_organization = {
					add_mio_size = 1
					add_mio_funds = 500

				#	unlock_mio_trait_tooltip  = {
				#		department = CAN_mio_department_design_plane_heavy_combat
				#		trait = CAN_mio_trait_cookie_carriers
				#	}
				}
			}

			#else = {
			#	custom_effect_tooltip = available_designer
			#	show_ideas_tooltip = CAN_halifax_shipyards
			#}
		}
	}

	focus = {
		id = CAN_habakkuk_carrier
		icon = GFX_goal_generic_navy_carrier
		prerequisite = { focus = CAN_carrier_primacy }
		x = 0
		y = 1
		relative_position_id = CAN_carrier_primacy

		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {

			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.5
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			if = {
				limit = {
					has_dlc = "Gotterdammerung"
				}
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					add_ideas = habakkuk_carriers_ns_mtg
					custom_effect_tooltip = generic_skip_one_line_tt
					
					add_tech_bonus = {
						name = CAN_habakkuk_carrier
						bonus = 0.5
						uses = 1 
						category = pykrete_tech
					}
				}
				else = {
					add_ideas = habakkuk_carriers_ns
					custom_effect_tooltip = generic_skip_one_line_tt
				}

				add_tech_bonus = {
					name = CAN_habakkuk_carrier
					bonus = 1.0
					uses = 1
					category = cv_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = CAN_habakkuk_carrier
					bonus = 1.0
					uses = 2
					category = cv_tech
				}
			}
		}
	}

	focus = {
		id = CAN_naval_expansion_initiative
		icon = GFX_goal_generic_construct_naval_dockyard

		cost = 5
		x = 2
		y = 1
		relative_position_id = CAN_carrier_primacy

		prerequisite = {
			focus = CAN_battleship_primacy
			focus = CAN_carrier_primacy
			focus = CAN_modern_screen_ships
		}

		available = {
			threat > 0.2
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_united_shipyards_DY
			}
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = CAN_united_shipyards_DY
			}
			add_ideas = CAN_naval_expansion_initiative
		}
	}

	focus = {
		id = CAN_trade_fleet
		icon = GFX_goal_generic_positive_trade_relations
		x = -1
		y = 1
		relative_position_id = CAN_naval_expansion_initiative

		cost = 5

		ai_will_do = {
			factor = 25
		}

		prerequisite = {
			focus = CAN_naval_expansion_initiative
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			add_ideas = CAN_trade_fleet			
		}
	}

	focus = {
		id = CAN_expand_the_repair_yards
		text = ENG_expand_repair_facilities
		icon = GFX_goal_navy_upgrade
		x = 0
		y = 2
		relative_position_id = CAN_naval_expansion_initiative

		cost = 5

		ai_will_do = {
			factor = 25
		}

		prerequisite = {
			focus = CAN_naval_expansion_initiative
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { }

		completion_reward = {
			add_ideas = ENG_expand_the_repair_yards	
		}
	}

	focus = {
		id = CAN_improved_naval_coordination
		icon = GFX_focus_generic_military_academy
		x = 1
		y = 1
		relative_position_id = CAN_naval_expansion_initiative

		cost = 5

		ai_will_do = {
			factor = 25
		}

		prerequisite = {
			focus = CAN_naval_expansion_initiative
		}

		available = {
			has_navy_size = {
				size > 39
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { }

		completion_reward = {
			add_ideas = CAN_improved_naval_coordination
		}
	}

}